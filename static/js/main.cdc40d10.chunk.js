(this["webpackJsonpjssp-frontend"]=this["webpackJsonpjssp-frontend"]||[]).push([[0],{23:function(e,t,a){},32:function(e,t,a){e.exports=a(59)},37:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),o=a(30),r=a.n(o),i=(a(37),a(9)),s=a(3),c=a(4),m=a(7),u=a(5),h=a(8);a(23);var p=function(e){for(var t="".concat(e,"color"),a=0,n=0;n<t.length;n++)a=t.charCodeAt(n)+((a<<5)-a);var l="#";for(n=0;n<3;n++){l+=("00"+(a>>8*n&255).toString(16)).substr(-2)}return l},d=function(e){function t(e){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"randColor",value:function(){return Math.floor(180*Math.random())}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.schedule.length;t++)if(t%3===0){var a=this.props.schedule[t],n=this.props.schedule[t+1],o=this.props.schedule[t+2],r=100*(o-n)/this.props.maxTime,i=100*n/this.props.maxTime,s={width:"".concat(r,"%"),height:"20px",backgroundColor:"".concat(p(a)),position:"absolute",left:"".concat(i,"%"),transition:"all 1s linear"},c=l.a.createElement("div",{id:"key-".concat(this.props.index,"-").concat(a),className:"job-".concat(a),style:s,"data-start":n,"data-end":o,"data-jobid":a},"Job-",a);e.push(c)}var m={position:"relative",display:"flex",top:"".concat(25*this.props.index,"px")};return l.a.createElement("div",{style:m},e)}}]),t}(l.a.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e={position:"relative",top:"".concat(25*this.props.index,"px")},t=[],a=10*(this.props.maxTime/10+1),n=0;n<a;n++){var o=100*n/this.props.maxTime,r={left:"".concat(o,"%"),transition:"all 1s linear",position:"absolute"};if(n%10===0){var i=l.a.createElement("span",{style:r},l.a.createElement("div",null,"|"),l.a.createElement("div",null,n));t.push(i)}}return l.a.createElement("div",{style:e},t)}}]),t}(l.a.Component),f=["Bottle Expansion Mold","Water Cleaning/ Purifying","Water Filling","Bottle Capping","Bottle Labeling"],b=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.schedule.map((function(e){return e[e.length-1]}));console.log(e);var t=Math.max.apply(Math,Object(i.a)(e));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"ganttChartWithY"},l.a.createElement("div",{className:"ganttChartYAxis"},this.props.schedule.map((function(e,t){var a=f[t];return l.a.createElement("span",{className:"yAxisTick"},"".concat(a," Machine"))}))),l.a.createElement("div",{className:"ganttChartData"},this.props.schedule.map((function(e,a){return l.a.createElement(d,{schedule:e,maxTime:t,index:a})})),l.a.createElement(g,{index:this.props.schedule.length,maxTime:t}))))}}]),t}(l.a.Component),E=function(){var e=function(e){var t=this;this.schedule=e,this.getMakeSpan=function(){var e=t.schedule.map((function(e){return e.length&&0!==e.length?e[e.length-1]:0})),a=-1/0;return e.forEach((function(e){e>a&&(a=e)})),a}};function t(t){var a=this;this.jssp1d=t,this.JSSP1dToGantt=function(t){for(var n=[],l=0;l<t.numMachines;l++)n.push([]);var o=new Array(t.numJobs).fill(0);return a.jssp1d.forEach((function(e){var a=t.jobs[e].splice(0,2),l=a[0],r=a[1],i=0===n[l].length?0:n[l][n[l].length-1],s=o[e],c=Math.max(s,i);o[e]=c+r;[e,c+1,c+r].forEach((function(e){return n[l].push(e)}))})),new e(n)}}function a(e,a){for(var n=[],l=0;l<a;l++)for(var o=0;o<e;o++)n.push(l);console.log("done creating jobs"),console.log(n);var r=new t(function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(n));return console.log(r),r}function n(e){for(var t=(new Date).getTime();t+e>=(new Date).getTime(););}onmessage=function(e){console.log("this inside onmessage"),console.log(this),console.log("Message received from main script"),console.log("message",e);var t=e.data,l=t.problem,o=t.algorithmRepetition,r=t.algorithmMaxTimeSecs;console.log(l,r),function(e,t,l){console.log("inside run optimization , this is "),console.log(this),console.log(a&&"generate Random 1d is available");for(var o=1/0,r=(new Date).getTime()+1e3*l,i=[],s=0;s<t;s++){if(s%100==0&&(new Date).getTime()>r){console.log("Ending because of time limit"),console.log("Ran times : ",s);break}var c=a(e.numMachines,e.numJobs),m=Object.assign({},e);m.jobs=JSON.parse(JSON.stringify(e.jobs));var u=c.JSSP1dToGantt(m),h=u.getMakeSpan();if(console.log("adding to newmakespan from worer"),i.push(h),s%1===0){var p={type:"iterationCount",iteration:s+1,newMakeSpan:i};this.postMessage(p),n(200),i.length=0}if(h<o){o=h,console.log("Found Better",u),console.log("New Make Span at index ",s,h),this.postMessage("Got New MakeSpan");var d={type:"newSchedule",schedule:u.schedule,makeSpan:o,minMakeSpanDetectedIteration:s};this.postMessage(d),n(1e3)}}}(l,o,r);var i="Received from main: "+e.data;console.log("Posting message back to main script"),this.postMessage(i)}}.toString();E=E.substring(E.indexOf("{")+1,E.lastIndexOf("}"));var v=new Blob([E],{type:"application/javascript"}),k=URL.createObjectURL(v);a(38);function y(e){return l.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-dark bg-primary"},l.a.createElement("a",{class:"navbar-brand",href:"/"},"Job Shop Problem Demo"),l.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{class:"navbar-toggler-icon"})),l.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{class:"navbar-nav mr-auto"},l.a.createElement("li",{class:"nav-item active"},l.a.createElement("a",{class:"nav-link",href:"/"},"Water Bottle Plant Example ",l.a.createElement("span",{class:"sr-only"},"(current)"))),l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{disabled:"true",class:"nav-link",href:"/"},"Plastics Plant Example (coming soon)")))))}function w(e){return l.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{class:"navbar-nav mr-auto"},l.a.createElement("li",{class:"nav-item active"},l.a.createElement("a",{class:"nav-link",href:"/"},"Random Algorithm ",l.a.createElement("span",{class:"sr-only"},"(current)"))),l.a.createElement("li",{class:"nav-item"},l.a.createElement("a",{disabled:!0,class:"nav-link",href:"/"},"Neighbourhood search algorithm (Coming Soon)")))))}a(39);var S=a(11),j=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.data.map((function(e,t){return{x:t,y:e}}));return l.a.createElement("div",{className:"App"},l.a.createElement("div",null,l.a.createElement(S.e,{height:this.props.height||300,width:this.props.width||300},l.a.createElement(S.b,{data:e}),l.a.createElement(S.d,{title:"Number of Iterations"}),l.a.createElement(S.f,{title:"MakeSpan"}),l.a.createElement(S.c,null),l.a.createElement(S.a,null))))}}]),t}(n.Component),M=new function(e,t){this.numJobs=e,this.numMachines=t,this.jobs=[]}(4,5);M.jobs=[[0,10,1,10,2,10,3,10,4,8],[0,50,1,15,2,10,3,10,4,16],[0,30,1,12,2,20,3,10,4,16],[0,15,1,30,2,20,3,10,4,10]];var x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={schedule:[[],[]],makeSpan:1/0,minMakeSpanDetectedIteration:0,iterations:0,workerInstance:new Worker(k),makeSpanHistory:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state.workerInstance.addEventListener("message",(function(t){console.log("Received response:"),console.log(t.data),t.data&&"iterationCount"===t.data.type?(console.log("About to concate makeSpan history array"),e.setState({iterations:t.data.iteration,makeSpanHistory:[].concat(Object(i.a)(e.state.makeSpanHistory),Object(i.a)(t.data.newMakeSpan))})):t.data&&"newSchedule"===t.data.type?(console.log("New Schedule ".concat(t.data.schedule)),e.setState({schedule:t.data.schedule,makeSpan:t.data.makeSpan,minMakeSpanDetectedIteration:t.data.minMakeSpanDetectedIteration})):console.log("generic Message ",t.data)}),!1),this.state.workerInstance.postMessage({algorithmRepetition:50,problem:M,algorithmMaxTimeSecs:30})}},{key:"render",value:function(){console.log("Render function re-running",this.state.schedule);var e=.9*window.innerWidth;return l.a.createElement("div",{className:"App"},l.a.createElement(y,null),l.a.createElement(w,null),l.a.createElement("h3",null,"Water Bottling Plant - MakeSpan Optimization"),l.a.createElement("p",null,l.a.createElement("strong",null,"Number of Simulations Performed:")," ",this.state.iterations,"  |",l.a.createElement("strong",null,"Minimum MakeSpan detected:")," ",this.state.makeSpan," | ",l.a.createElement("strong",null,"Min detected after iteration :")," ",this.state.minMakeSpanDetectedIteration),l.a.createElement("h6",null,"Plot of makespan for each different simulation when using random Algorithm"),l.a.createElement(j,{data:this.state.makeSpanHistory,width:e}),l.a.createElement("hr",null),l.a.createElement("h6",null,"Schedule with the least makespan"),l.a.createElement(b,{schedule:this.state.schedule}),l.a.createElement("div",{className:"explanation"},l.a.createElement("p",null,"The Chart above shows the order in which each operation in a water bottling plant must run on each machine to complete all bottling activities in the most efficient manner. Watch the chart change as the algorithm finds more and more efficient way to run the factory over time. Simulation is slowed down for demonstration purpose."),l.a.createElement("hr",null),l.a.createElement("h3",null,"Explanation"),"In this demo, we are trying to optimize how to run a water bottling plant. We have 5 machines for different operations, and various different types of products we need to produce.",l.a.createElement("ol",null,l.a.createElement("li",null,"Machine 0 - Bottle Expansion Molding"),l.a.createElement("li",null,"Machine 1 - Water Cleaning or purifying Machine "),l.a.createElement("li",null,"Machine 2 - Pouring water / Filling Process "),l.a.createElement("li",null,"Machine 3 - Capping"),l.a.createElement("li",null,"Machine 4 - Labelling")),"This factory produces 4 different types of water bottles, and each water bottling operation must be run in the following order:",l.a.createElement("ol",null,l.a.createElement("li",null,l.a.createElement("span",{style:{backgroundColor:"".concat(p(0))}},"Job 0 - Spring Water 16oz "),l.a.createElement("ol",null,l.a.createElement("li",null,"Bottle Expansion - 10 seconds"),l.a.createElement("li",null,"Water Purifying - 30 seconds"),l.a.createElement("li",null,"Water Filling - 10 seconds"),l.a.createElement("li",null,"Bottle Capping - 10 seconds"),l.a.createElement("li",null,"Bottle Labeling - 8 seconds"))),l.a.createElement("li",null,l.a.createElement("span",{style:{backgroundColor:"".concat(p(1))}},"Job 1 - Distilled Water 16 oz"),l.a.createElement("ol",null,l.a.createElement("li",null,"Bottle Expansion - 50 seconds"),l.a.createElement("li",null,"Water Purifying - 60 seconds"),l.a.createElement("li",null,"Water Filling - 10 seconds"),l.a.createElement("li",null,"Bottle Capping - 10 seconds"),l.a.createElement("li",null,"Bottle Labeling - 16 seconds"))),l.a.createElement("li",null,l.a.createElement("span",{style:{backgroundColor:"".concat(p(2))}},"Job 2 - Distilled Water 32 oz"),l.a.createElement("ol",null,l.a.createElement("li",null,"Bottle Expansion - 30 seconds"),l.a.createElement("li",null,"Water Purifying - 90 seconds"),l.a.createElement("li",null,"Water Filling - 20 seconds"),l.a.createElement("li",null,"Bottle Capping - 10 seconds"),l.a.createElement("li",null,"Bottle Labeling - 16 seconds"))),l.a.createElement("li",null,l.a.createElement("span",{style:{backgroundColor:"".concat(p(3))}},"Job 3 - Bottoled Water 32 oz"),l.a.createElement("ol",null,l.a.createElement("li",null,"Bottle Expansion - 15 seconds"),l.a.createElement("li",null,"Water Purifying - 90 seconds"),l.a.createElement("li",null,"Water Filling - 20 seconds"),l.a.createElement("li",null,"Bottle Capping - 10 seconds"),l.a.createElement("li",null,"Bottle Labeling - 10 seconds")))),"Algorithm that runs in the background finds the most optimal way of running all the jobs in the given order. The Chart shows the order in which each job must run on each machine to complete all bottling activities in the most efficient manner. Watch the chart change as the algorithm finds more and more efficient way to run the factory."))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.cdc40d10.chunk.js.map