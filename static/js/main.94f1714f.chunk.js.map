{"version":3,"sources":["mainAppComponents/mainAppNavBar.js","sharedComponents/react/Input.js","Pages/Machines.js","helpers.js","Pages/Categories.js","Pages/Jobs.js","mainAppComponents/Parameters.js","jobIdToColor.js","GanttMachineSchedule.js","JSSP.js","JobSetup.js","GanttXTicks.js","GattChart.js","worker.js","TwoDPlot.js","App.js","factoryOptimizationApp.js","serviceWorker.js","index.js"],"names":["MainAppNavBar","TextInput","props","id","Math","random","toString","substr","className","label","htmlFor","value","onChange","type","aria-describedby","placeholder","smallLabel","InlineMultiSelect","useState","Set","selectedValues","setSelectedValues","useEffect","allOptions","map","cat","idx","key","class","name","checked","has","event","categoryId","selectedClone","delete","add","Array","from","handleChange","MachineRow","editing","setEditing","machine","setName","categories","setCategories","target","console","log","categoryOptions","onClick","updatedMachineRow","updateMachine","categoryOptionsMap","Map","forEach","catOpt","set","reduce","prev","cur","get","deleteCategory","category","Machines","handleNameChange","setState","handleCategoryChange","categoriesSelected","addMachine","preventDefault","createMachine","state","this","machines","onSubmit","disabled","React","Component","CategoryRow","updateCategory","Categories","handleSubmit","createCategory","length","JobOperation","addingMachine","setAddingMachine","undefined","selectedMachine","setSelectedMachine","machineTime","setMachineTime","initialMachineSelection","operationName","machineAndTimes","mt","arr","newMachineAndTimes","filter","v","i","updateOperation","op","handleDeleteIconClick","newMachineTime","m","Job","operations","updateJob","newOperationName","setNewOperationName","addingNew","setAddingNew","operation","newOperations","oldJob","js","jobWithNewOperations","JobEditor","newJobName","setNewJobName","jobs","jobDef","createJob","Parameters","jobIdToColour","jobid","str","hash","charCodeAt","colour","GanttMachineSchedule","a","schedule","start","end","_width","maxTime","_startpx","style","width","height","backgroundColor","position","left","transition","index","data-start","data-end","data-jobid","push","parentStyle","display","top","generateProblemInstance","arrOfArr","job","flattened","acc","numberOfMachineOptions","flat","t","parseInt","jobObjectToArrayOfArray","jsspProblem","JSSPProblemInstance","numMachineByJobs","jobDefArr","numMachines","nextIndexToCheck","n","mbar","numJobs","GanttXTicks","ticks","startTick","tick","endTick","GanttChart","allEnds","schArr","max","sch","code","ResourceTypeEnum","ComplexOperationTypeEnum","JobShopAlgorithmEnum","RandomAlgorithmEnum","MaterialEnum","JobShopProblem","resources","maxNumberOfSimulations","maxSecondsToRun","algorithm","RANDOM","hillClimbingRandomRestartPercent","totalRestarts","terminationCriteriaFuncs","generateDefaultTerminationCriteriaFunctions","bestMakeSpanLocal","Infinity","randomAlgorithm","FISHERYATES","prototype","addJob","addOperation","jobKey","tags","keys","curr","MACHINE","addResource","resource","setSolutionParameters","params","addTerminationCriteria","terminationFunction","isOperationComplex","hasOwnProperty","FisherYatesShuffle","array","temporaryValue","randomIndex","currentIndex","floor","countOperations","_this","count","_op","CAN_RUN_IN_PARALLEL","_operations","oneDToGanttChart","oned","ganttChartMachineMap","jobOperationIndexTrackingMap","jobEarliestStartMap","addOperationToSchedule","jobId","scheduleSoFar","earliestMachineAvailableTime","earliestJobStartTime","startTime","endTime","time","requiredInventory","operationIndex","complexOperation","endTimes","maxEndTime","apply","CAN_RUN_IN_MULTIPLE_MACINES","Error","randomlyChoosenOperationFromMultipleMachineOptions","onedArrayOfJobs","getRandomArrayOfJobs","k","opcount","fill","concat","NORANDOM","swap","base","randi","randj","randiVal","best1Dsolution","HILL_CLIMBING","HILL_CLIMBING_WITH_RESTARTS","best1DSolutionLocal","costFunction","ganttChart","values","currentListOfSchedules","lastTime","funcs","args","currentSimulationIndex","terminationTime","Date","simulationStartTime","getTime","setSeconds","getSeconds","solve","postMessage","terminateNow","bestGanttChart","currentSimCount","bestMakeSpan","bestMakeSpanIndex","localMakeSpanHistory","bestMakeSpanHistory","defaultTerminationArgs","f","makespan","sleep","iteration","miliseconds","currentTime","onmessage","e","data","algorithmRepetition","problem","algorithmMaxTimeSecs","algorithmType","jsspSolver","mat","solParams","workerResult","substring","indexOf","lastIndexOf","blob","Blob","worker_script","URL","createObjectURL","problemStatic","App","startJobShopWorker","round","workerInstance","Worker","WebWorkerScript","addEventListener","newXData","newYData","dataSource","setTimeout","_","uPlotRef","setData","makeSpan","minMakeSpanDetectedIteration","maxAlgorithmRepetition","handleRestartJobShopWorkerButton","terminate","iterations","makeSpanHistory","handleStopWorker","opts","title","window","innerWidth","series","stroke","axes","scales","x","uPlot","document","getElementById","createChart","prevProps","prevState","snapshot","colSpan","marginTop","j","o","allMachineTimes","FactoryOptimizationApp","handleNavBarClick","choosenMenu","activeMenu","_machine","mac","deleteMachine","deleteJob","best_schedule","JSON","parse","localStorage","getItem","setItem","stringify","basename","process","to","exact","path","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","href","origin","fetch","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.94f1714f.chunk.js","sourcesContent":["import React from 'react';\r\nimport '../styles/navbar.scss';\r\n\r\nfunction MainAppNavBar(props){\r\n  const menuItems =  ['Machines','Jobs','Parameters','Solution']\r\n  console.log(props)\r\n  return (\r\n    <nav>\r\n      <ul className='factory-navbar'>\r\n      {menuItems.map(menu => {\r\n        const activeClass = menu == props.activeMenu ? 'active' : ''\r\n        console.log(\"activeClass \" , activeClass)\r\n        return <> \r\n          <li className='factory-navbar__menu-item' onClick={() => props.handleClick(menu)}>{menu}</li> \r\n          <span className={`factory-navbar__right-arrow ${activeClass}`}></span>\r\n        </>\r\n      })}\r\n      </ul>\r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default MainAppNavBar\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\n/**\r\n * Generates a Input Form. Below assumes that you have react and bootstrap imported in your project.\r\n * @param {{id?:string|number, label?:string, type?:string, placeholder?:string, smallLabel?:string, value:string, onChange:function}} props\r\n */\r\nfunction TextInput(props) {\r\n  let id = props.id ? props.id : Math.random().toString(36).substr(2); //If id is not provided, assign a random string.\r\n  return (\r\n    <div className=\"form-group\">\r\n      {props.label ? <label htmlFor={id}>{props.label}</label> : null}\r\n      <input \r\n        value={props.value}\r\n        onChange={props.onChange}\r\n        type={props.type ? props.type : \"text\"} \r\n        className=\"form-control\" \r\n        id={id} \r\n        aria-describedby={props.label} \r\n        placeholder={props.placeholder} \r\n      />\r\n      {props.smallLabel ? <small id=\"id\" className=\"form-text text-muted\">{props.smallLabel}</small> : null}\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Generates a InlineMultiSelect Form Input.\r\n * @param {{allOptions:{id:string,name:string}[], selectedValues:[],name:string, label?:string, onChange:function }} props \r\n */\r\nfunction InlineMultiSelect(props){\r\n  const [selectedValues, setSelectedValues] = useState(new Set(props.selectedValues ? props.selectedValues : []))\r\n\r\n  // when props.selectedValues changes, update the state accordingly. This helps when you are clearing selectedValues from parent component\r\n  useEffect(() => {\r\n    setSelectedValues(new Set(props.selectedValues))\r\n  }, [props.selectedValues])\r\n\r\n  function handleChange(event, categoryId){\r\n    const selectedClone = new Set(selectedValues);\r\n    if(selectedClone.has(categoryId)){\r\n      selectedClone.delete(categoryId)\r\n    } else {\r\n      selectedClone.add(categoryId)\r\n    }\r\n    setSelectedValues(selectedClone);\r\n    props.onChange(Array.from(selectedClone))\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-group\">\r\n      {props.label ? <p>{props.label}</p> : null }\r\n      {props.allOptions.map( (cat, idx) => {\r\n        return (\r\n          <div key={cat.id} class=\"form-check form-check-inline\">\r\n            <input\r\n              class=\"form-check-input\" \r\n              type=\"checkbox\" \r\n              id={`${props.name}-${idx}`} \r\n              name={props.name}\r\n              value={cat.id}\r\n              checked={selectedValues.has(cat.id) ? true : false }\r\n              onChange={(event) => handleChange(event, cat.id) }\r\n            />\r\n            <label className=\"form-check-label\" htmlFor={`${props.name}-${idx}`}>{cat.name}</label>\r\n          </div>\r\n        )\r\n      })}\r\n  </div>)\r\n}\r\n\r\nexport { TextInput, InlineMultiSelect }","import React, { useState } from 'react';\r\nimport '../styles/machines.scss';\r\nimport { randomID } from '../helpers';\r\nimport { TextInput, InlineMultiSelect } from '../sharedComponents/react/Input';\r\nimport { FaRegTrashAlt, FaEdit  } from 'react-icons/fa';\r\n\r\n/**\r\n * \r\n * @param {{machine:{},categoryOptions:[] }} props \r\n */\r\nfunction MachineRow(props){\r\n  const [editing, setEditing] = useState(false);\r\n  const [name, setName] = useState(props.machine.name);\r\n  const [categories, setCategories] = useState(props.machine.categories)\r\n\r\n  const handleEditIconClick = function(){\r\n    setEditing(true);\r\n  }\r\n\r\n  const handleCancel = function(){\r\n    setEditing(false)\r\n  }\r\n  const handleSave = function(){\r\n    const updatedMachineRow = {id:props.machine.id, name:name, categories:categories}\r\n    console.log(\"updated machines \",  updatedMachineRow)\r\n    props.updateMachine({id:props.machine.id, name:name, categories:categories})\r\n    setEditing(false)\r\n  }\r\n\r\n  const handleCategoryChange = function(categories) {\r\n    console.log(\"updating categories\", categories)\r\n    setCategories(categories);\r\n  }\r\n\r\n  if(editing){\r\n    return (\r\n      <tr key={props.machine.id}>\r\n        <td>{props.machine.id}</td>\r\n        <td><input value={name} onChange={(event) => setName(event.target.value)}  /></td>\r\n        <td>\r\n          <InlineMultiSelect \r\n            onChange={handleCategoryChange}\r\n            allOptions={props.categoryOptions}\r\n            selectedValues={categories} \r\n            name={`category-select-edit-${props.machine.id}`}\r\n          />\r\n        </td>\r\n        <td>\r\n          <div className=\"d-flex justify-content-around\">\r\n            <button onClick={handleSave}>Save</button>\r\n            <button onClick={handleCancel}>Cancel</button>\r\n          </div>\r\n        </td>\r\n    </tr>\r\n    )\r\n  }\r\n  const categoryOptionsMap = new Map()\r\n  props.categoryOptions.forEach(catOpt => {\r\n    categoryOptionsMap.set(catOpt.id, catOpt);\r\n  })\r\n\r\n  return (\r\n    <tr key={props.machine.id}>\r\n      <td>{props.machine.id}</td>\r\n      <td>{props.machine.name}</td>\r\n      <td>{props.machine.categories.reduce( (prev, cur, idx) => `${prev} ${idx === 0 ? '': ','} ${ categoryOptionsMap.has(cur) ? categoryOptionsMap.get(cur).name : '' }`,'')}</td>\r\n      <td>\r\n          <div className=\"d-flex justify-content-around\">\r\n            <FaEdit onClick={handleEditIconClick}/>\r\n            <FaRegTrashAlt onClick={() => props.deleteCategory(props.category)}/>\r\n          </div>\r\n        </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nclass Machines extends React.Component {\r\n  constructor(props){\r\n    super(props) //props gets the machines object.\r\n    this.state = {\r\n      name:'',\r\n      categories:[]\r\n    }\r\n  }\r\n  handleNameChange = (event) => {\r\n    this.setState({name:event.target.value})\r\n  }\r\n  handleCategoryChange = (categoriesSelected) => {\r\n    this.setState({\r\n      categories: categoriesSelected\r\n    })\r\n  }\r\n  addMachine = (event) => {\r\n    event.preventDefault();\r\n    // CODE to call the API. \r\n    this.props.createMachine({\r\n      name:this.state.name,\r\n      categories:this.state.categories,\r\n      id: randomID()\r\n    });\r\n    \r\n    // Clear the Name and categories\r\n    this.setState({\r\n      name:'',\r\n      categories: []\r\n    })\r\n  }\r\n  render(){\r\n    return (\r\n    <div className=\"kr-card1\">\r\n        <h3>Machines</h3>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Id</th>\r\n              <th>Name</th>\r\n              <td>Categories</td>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.props.machines.map(machine => <MachineRow machine={machine} updateMachine={this.props.updateMachine} categoryOptions={this.props.categories} />)}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"kr-card\">\r\n\r\n          <h3> Add a new machine </h3>\r\n          <form className=\"\" onSubmit={this.addMachine}>\r\n            <TextInput\r\n              id=\"machine-name\" \r\n              label=\"Name for your machine\"\r\n              smallLabel=\"Give your machine a recognizable name\"\r\n              value={this.state.name}\r\n              onChange={this.handleNameChange}\r\n            />\r\n            <InlineMultiSelect \r\n              onChange={this.handleCategoryChange} \r\n              allOptions={this.props.categories}\r\n              selectedValues={this.state.categories}\r\n              name=\"category-select-new\"\r\n            />\r\n            <button type=\"submit\" className=\"btn btn-primary mb-2\" disabled={this.state.name === \"\" }>Add Machine</button>\r\n          </form>\r\n        </div>\r\n      \r\n    </div>)\r\n  }\r\n}\r\n\r\nexport default Machines \r\n","var randomID = function () {\r\n    // Math.random should be unique because of its seeding algorithm.\r\n    // Convert it to base 36 (numbers + letters), and grab the first 9 characters\r\n    // after the decimal.\r\n    return '_' + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n\r\nexport {\r\n    randomID,\r\n   \r\n}\r\n","import React, { useState } from 'react';\r\nimport { TextInput } from '../sharedComponents/react/Input';\r\nimport { FaRegTrashAlt, FaEdit  } from 'react-icons/fa';\r\nimport '../styles/kr-card.css';\r\nimport '../styles/kr-form.css';\r\n\r\n/**\r\n * Handles Showing Category in a Table Row. Also Handles deleting and Editing based on user input. \r\n * @param {{category:{id:string,name:string},updateCategory:function, deleteCategory: function }} props \r\n */\r\nfunction CategoryRow(props){\r\n  const [editing, setEditing] = useState(false);\r\n  const [name, setName] = useState(props.category.name); // For Managing state during editing \r\n\r\n  const handleEditIconClick = function(){\r\n    setEditing(true)\r\n  }\r\n  const handleChangeWhenEditing = function(event){\r\n    setName(event.target.value)\r\n  }\r\n  const handleSave = function(){\r\n    props.updateCategory({\r\n      ...props.category,\r\n      name\r\n    })\r\n    setEditing(false)\r\n  }\r\n  const handleCancel = function () {\r\n    setEditing(false)\r\n  }\r\n\r\n\r\n  if(editing){\r\n    return (\r\n      <tr key={props.category.id}>\r\n      <td>{props.category.id}</td>\r\n      <td>\r\n        <input value={name} onChange={handleChangeWhenEditing}>\r\n        </input>\r\n      </td>\r\n      <td>\r\n        <div className=\"d-flex justify-content-around\">\r\n          <button onClick={handleSave}>Save</button>\r\n          <button onClick={handleCancel}>Cancel</button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <tr key={props.category.id}>\r\n        <td>{props.category.id}</td>\r\n        <td>{props.category.name}</td>\r\n        <td>\r\n          <div className=\"d-flex justify-content-around\">\r\n            <FaEdit onClick={handleEditIconClick}/>\r\n            <FaRegTrashAlt onClick={() => props.deleteCategory(props.category)}/>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n  )\r\n}\r\n\r\nclass Categories extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      name:''\r\n    }\r\n  }\r\n  handleChange = (event) =>{\r\n    this.setState({\r\n      name:event.target.value\r\n    })\r\n    console.log(event.target.value)\r\n  }\r\n  handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    this.props.createCategory({\r\n      name:this.state.name,\r\n      machines:[]\r\n    })\r\n    this.setState({\r\n      name:''\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"machines-wrapper__categories kr-card2\">\r\n        <h3>Tags</h3>\r\n        <table className=\"table\">\r\n          <thead>\r\n            {this.props.categories.length > 0 && \r\n              <tr>\r\n                <th>Id</th>\r\n                <th>Name</th>\r\n                <td>Actions</td>\r\n              </tr>\r\n            }\r\n          </thead>\r\n          <tbody>\r\n            {this.props.categories.map(category => <CategoryRow category={category} updateCategory={this.props.updateCategory} deleteCategory={this.props.deleteCategory}/>)}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"kr-card\">\r\n\r\n        <p className=\"machines-wrapper__categories--intro\">\r\n          Please Enter a new tag below. Once saved,\r\n          the tags will appear as a selection option\r\n          in each machine. You'll have to individually apply\r\n          new tags to existing machines.\r\n        </p>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <TextInput\r\n            id=\"category-input\"\r\n            value={this.state.name}\r\n            onChange={this.handleChange}\r\n            label=\"Enter new category\"\r\n            smallLabel=\"You will be able to apply each category to multiple machines\"\r\n            />\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={this.state.name === \"\"}>Add Category</button>\r\n        </form>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Categories","import React, { useState, useEffect } from \"react\";\r\nimport { TextInput } from '../sharedComponents/react/Input';\r\nimport { FaRegTrashAlt, FaEdit  } from 'react-icons/fa';\r\n\r\n/**\r\n * Display a Job Operation\r\n * @param {{id:number, operationName:string, machineAndTimes:[[id:number,time:number]], machines:[], updateOperation:function }} props \r\n */\r\nfunction JobOperation(props) {\r\n  const [addingMachine, setAddingMachine]= useState(false);\r\n  const [selectedMachine, setSelectedMachine] = useState(props.machines.length > 0 ? props.machines[0].id  : undefined);\r\n  const [machineTime, setMachineTime] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const initialMachineSelection = props.machines.length > 0 ? props.machines[0].id  : undefined\r\n    setSelectedMachine(initialMachineSelection)\r\n  }, [props.machines])\r\n  \r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const newMachineTime = [selectedMachine, machineTime]\r\n    const {machines, updateOperation, ...op} = props\r\n    const updatedOperation = {\r\n      ...op,\r\n      machineAndTimes:[...props.machineAndTimes, newMachineTime]\r\n    }\r\n    updateOperation(updatedOperation);\r\n    setMachineTime(0);\r\n    setAddingMachine(false);\r\n  }\r\n  \r\n  const handleDeleteIconClick = (idx) => {\r\n    console.log(\"deleting \", idx)\r\n    const newMachineAndTimes = props.machineAndTimes.filter( (v, i) => i !== idx)\r\n    const {machines, updateOperation, ...op} = props\r\n    const updatedOperation = {\r\n      ...op,\r\n      machineAndTimes:newMachineAndTimes\r\n    }\r\n    updateOperation(updatedOperation);\r\n  }\r\n\r\n  return (\r\n    <div className=\"kr-card mb-2\">\r\n      <h5>{props.operationName}</h5>\r\n      <table className=\"table table-sm\">\r\n        <thead>\r\n          <tr>\r\n            <th>Machine Id</th>\r\n            <th>Time</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {props.machineAndTimes.map( (mt, idx, arr) => {\r\n            return <tr key={idx}>\r\n              <td>{mt[0]}</td>\r\n              <td>{mt[1]}</td>\r\n              <td>\r\n                <div className=\"d-flex justify-content-around\">\r\n                  {/* <FaEdit onClick={handleEditIconClick}/> */}\r\n                  <FaRegTrashAlt onClick={() => handleDeleteIconClick(idx) }/>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          })}\r\n        </tbody>\r\n      </table>\r\n      {addingMachine ? \r\n        <form onSubmit={handleSubmit}>\r\n          <select className=\"form-control\" onChange={(event) => setSelectedMachine(event.target.value)} value={selectedMachine}>\r\n            {props.machines.map( m => <option value={m.id}>{m.name}</option> )}\r\n          </select>\r\n          <input className=\"form-control\" placeholder=\"enter time\" value={machineTime} onChange={(event)=>setMachineTime(event.target.value)}></input>\r\n          <button>Submit</button>\r\n          <button onClick={() => setAddingMachine(false)} className=\"button btn-primary mt-1\">Cancel</button>\r\n        </form>\r\n      \r\n      : <button onClick={() => setAddingMachine(true)} className=\"button btn-primary mt-1\">Add New Machine Option</button>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * Display a Job.\r\n * @param {{id:number, name:string, operations:[ [machineid:number,time:string] ] , updateJob:function, machines }} props \r\n */\r\nfunction Job(props) {\r\n  const {id, name,operations,updateJob,machines} = props;\r\n\r\n  const [newOperationName, setNewOperationName] = useState('');\r\n  const [addingNew, setAddingNew] = useState(false)\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    // Add Operation to the Job, and send a update\r\n    const jobWithNewOperations = {\r\n      id: id,\r\n      name: name,\r\n      operations: [...operations, {\r\n        id: operations.reduce( (prev, cur) => cur.id <= prev ? prev+1 : cur.id+1 , 1),\r\n        operationName:newOperationName,\r\n        machineAndTimes:[]\r\n      }]\r\n    }\r\n    updateJob(jobWithNewOperations);\r\n    setNewOperationName('');\r\n    setAddingNew(false);  \r\n  }\r\n\r\n  const updateOperation = (operation) => {\r\n    // Create a new copy of operation here.\r\n    const newOperations = operations.map( op => op.id === operation.id ? operation : op)\r\n    const {machines, updateJob, ...oldJob} = props\r\n    const jobWithUpdatedOperation = {\r\n      ...oldJob,\r\n      operations:newOperations\r\n    }\r\n    updateJob(jobWithUpdatedOperation);\r\n  }\r\n  return (\r\n    <div className=\"kr-card mb-3\">\r\n      <h3>{name}</h3>\r\n      <div className=\"d-flex flex-wrap align-items-center align-self-center\">\r\n      {operations.map(js => \r\n        <>\r\n          <JobOperation\r\n            id={js.id}\r\n            key={js.operationName} \r\n            operationName={js.operationName} \r\n            machineAndTimes={js.machineAndTimes}\r\n            machines={machines}\r\n            updateOperation={updateOperation}\r\n          />\r\n          <div className=\"p-3\"> -> </div>\r\n        </>\r\n      )}\r\n        { addingNew ? \r\n        <form className=\"kr-card\" onSubmit={handleSubmit}>\r\n          <TextInput\r\n            id=\"job-new-input\"\r\n            value={newOperationName}\r\n            onChange={(event) => setNewOperationName(event.target.value)}\r\n            label=\"Enter new Operation\"\r\n            smallLabel=\"You will be able to add possible machines after adding an operation\"\r\n            />\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={newOperationName === \"\"}>Add new Operation</button>\r\n          <button className=\"btn btn-warning ml-1\" onClick={() => setAddingNew(false)}>Cancel</button>\r\n        </form>\r\n        : <button className=\"btn btn-primary\" onClick={() => setAddingNew(true)}>Add Operation </button>\r\n        }\r\n      </div>\r\n    </div>)\r\n}\r\n\r\n/**\r\n * @param {{machines:[], jobs:[{jobSequence:[]] }} props \r\n */\r\nfunction JobEditor(props) {\r\n  const [newJobName, setNewJobName ] = useState('')\r\n\r\n  const handleChange = (event) => {\r\n    setNewJobName(event.target.value)\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    // call props.addJob \r\n    props.createJob({\r\n      name:newJobName,\r\n      operations:[]\r\n    })\r\n\r\n    setNewJobName('');\r\n  }\r\n\r\n  return (\r\n    <div className=\"m-5\">\r\n      <h3>See SKUs below</h3>\r\n      { props.jobs.map(jobDef => <Job key={jobDef.name} id={jobDef.id} name={jobDef.name} operations={jobDef.operations} updateJob={props.updateJob} machines={props.machines} />) }\r\n      <form className=\"kr-card\" onSubmit={handleSubmit}>\r\n          <TextInput\r\n            id=\"job-new-input\"\r\n            value={newJobName}\r\n            onChange={handleChange}\r\n            label=\"Enter new Job (new SKU)\"\r\n            smallLabel=\"You will be able to add operations for each job after creating it\"\r\n          />\r\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={newJobName === \"\"}>Add new Job</button>\r\n        </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default JobEditor","import React from 'react';\r\n\r\nclass Parameters extends React.Component {\r\n  render(){\r\n    return <div>I am Parameters Component </div>\r\n  }\r\n}\r\n\r\nexport default Parameters;\r\n","// Modified from https://stackoverflow.com/questions/3426404/create-a-hexadecimal-colour-based-on-a-string-with-javascript\r\nfunction jobIdToColour(jobid) {\r\n    const str = `${jobid}color`\r\n    var hash = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    var colour = '#';\r\n    for (var i = 0; i < 3; i++) {\r\n        var value = (hash >> (i * 8)) & 0xFF;\r\n        colour += ('00' + value.toString(16)).substr(-2);\r\n    }\r\n    return colour;\r\n}\r\n\r\nexport default jobIdToColour","import React from 'react';\r\nimport jobIdToColour from './jobIdToColor';\r\n\r\n/**\r\n * Idea here is to take an array\r\n */\r\nfunction GanttMachineSchedule(props) {\r\n    const randColor = () => {\r\n        return Math.floor(Math.random() * 180) //use 180 instead of 255 to avoid colors too light\r\n    }\r\n    let a = [] \r\n    for(let i = 0; i< props.schedule.length; i++){\r\n        if(i%3 === 0){\r\n            const jobid = props.schedule[i];\r\n            const start = props.schedule[i + 1];\r\n            const end = props.schedule[i + 2];\r\n            const _width = 100* (end - start)/props.maxTime\r\n            const _startpx = 100* start / props.maxTime\r\n            const style = {\r\n                width:`${_width}%`,\r\n                height: '20px',\r\n                // border:'black',\r\n                backgroundColor:`${jobIdToColour(jobid)}`,\r\n                position:'absolute',\r\n                left:`${_startpx}%`,\r\n                transition: 'all 1s linear'\r\n            }\r\n\r\n            const width = <div key={`key-${props.index}-${jobid}-${i}`} id={`key-${props.index}-${jobid}`} className={`job-${jobid}`}  style={style} data-start={start} data-end={end} data-jobid={jobid}>Job-{jobid}</div>\r\n            a.push(width)\r\n        }\r\n        continue\r\n    }\r\n    const parentStyle = {\r\n        position:'relative',\r\n        display:'flex',\r\n        top:`${props.index * 25}px`\r\n    }\r\n    return (\r\n        <div style={parentStyle}>\r\n            {a}\r\n        </div>\r\n    )\r\n    \r\n}\r\n\r\nexport default GanttMachineSchedule","import GanttMachineSchedule from \"./GanttMachineSchedule\";\r\n\r\n\r\nconst jobObjectToArrayOfArray = (job) => {\r\n    const operationReducer = (acc, operation) => {\r\n      const numberOfMachineOptions = operation.machineAndTimes.length;\r\n      // const flattenedMachineTimes = operation.machineAndTimes.map()\r\n      return [...acc, numberOfMachineOptions, ...operation.machineAndTimes.flat().map(t => parseInt(t)) ] //converting to int just in case\r\n    }\r\n    const flattened = job.operations.reduce(operationReducer, []);\r\n    console.log(flattened)\r\n    return flattened\r\n  }\r\n/**\r\n * Generate a job from this.state.jobs, and this.state.machines \r\n */\r\nconst generateProblemInstance = (jobs, machines) => {\r\nconsole.log(\"running problemInstance\", jobs, machines)\r\nconst arrOfArr = jobs.map(job => {\r\n    return jobObjectToArrayOfArray(job);\r\n})\r\nconst jsspProblem = new JSSPProblemInstance(jobs.length,machines.length);\r\njsspProblem.jobs = arrOfArr\r\n// Infer number of machines the job needs to run based on job definition.\r\njsspProblem.numMachineByJobs = []\r\njsspProblem.jobs.forEach(jobDefArr => {\r\n  let numMachines = 0\r\n  let nextIndexToCheck = 0;\r\n  for(let i = 0; i < jobDefArr.length; i++ ){\r\n    if(i === nextIndexToCheck){\r\n      numMachines += 1\r\n      nextIndexToCheck = i + jobDefArr[i]*2 + 1\r\n    }\r\n  }\r\n  jsspProblem.numMachineByJobs.push(numMachines)\r\n})\r\n\r\nreturn jsspProblem\r\n}\r\n\r\n/**\r\n * Returns a new instance of JSSP Problem Instance. \r\n * @param {*} n number of Jobs\r\n * @param {*} m number of Machines\r\n * @param {*} mbar Don't Use\r\n * @param {[[numMachines, machineId1, machineTime1, machineIdN , machineTimeN, numMachines, machineIdx,...  ]]} jobs array of jobs\r\n */\r\nfunction JSSPProblemInstance(n,m,mbar){\r\n    this.numJobs = n;\r\n    this.numMachines = m;\r\n    this.numMachineByJobs = mbar;\r\n    this.jobs = []; // list of lists.\r\n}\r\n\r\nfunction JSSPGanttChartSolution(schedule){\r\n    /**\r\n     * Gantt Chart looks like this:\r\n     * [\r\n     *  [jobId,StartTime,EndTime,jobId,StartTime,EndTime,...]   -> for Machine with Index 0 \r\n     *  [jobId,StartTime,EndTime,...]   -> for Machine with Index 1\r\n     * ]\r\n     * It is useful to have GanttChart in this format because it lets us \r\n     * read the ganttChart in text format without any special help.\r\n     */\r\n    this.schedule = schedule\r\n    this.getMakeSpan = ()=>{\r\n        /**\r\n         * Calculates MakeSpan of an instance of a JSSP Gantt Chart Solution\r\n         * In our definition of ganttChart, we choose last integer of each array if array>0. \r\n         * and return max of them\r\n         */\r\n        const allEnds = this.schedule.map(arrForMachine => {\r\n            if(!arrForMachine.length || arrForMachine.length === 0){\r\n                return 0\r\n            }\r\n            return arrForMachine[arrForMachine.length -1 ]\r\n        });\r\n        return Math.max(...allEnds)\r\n    }\r\n}\r\n\r\n\r\nfunction JSSP1DEncoding(jobs1d){\r\n    /**\r\n     * Most JSSP problems have way too many ways to run, we need to generate options randomly\r\n     * Since randomly generating options is harder in  2d array while meeting all the constraints\r\n     * we will use a 1D Encoding. We also have functions to convert this into Gantt Chart. \r\n     * \r\n     * This can be represented as a singe array as well.\r\n     */\r\n    this.jssp1d = jobs1d\r\n    // Example jssp1d = [0,2,1,0,3,1,0,1,2,3,2,1,1,2,3,0,2,0,3,3]\r\n\r\n    this.JSSP1dToGantt = (jobInstance) => {\r\n        /**\r\n         * Given a 1D solution, convert it into Gantt Chart Solution. \r\n         */\r\n        //const test1D = [0,2,1,0,3,1,0,1,2,3,2,1,1,2,3,0,2,0,3,3]\r\n        // const test1D =[0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3]\r\n        // const m = 5 // Number of Machines: 0,1,2,3,4,5\r\n        // const n = 4 // Number of Jobs. 0,1,2,3 -> as denoted in the 1d strucutre. \r\n        const ganttChart = []\r\n        for(let i = 0; i<jobInstance.numMachines; i++){\r\n            ganttChart.push([])\r\n        }\r\n        //console.log(ganttChart)\r\n    \r\n        // Next we fill the ganttChart with data based on test1D\r\n        // We need access to the job instance so that we can look at\r\n        \r\n        // Keep Track of last time for each job.\r\n        const lastJobTime = new Array(jobInstance.numJobs).fill(0)\r\n        // console.log(\"Last Job Time\", lastJobTime)\r\n    \r\n        //console.log(jobInstance)\r\n        this.jssp1d.forEach(jobNumber => {\r\n            // job jobNumber is assigned to its respective first. \r\n            const jobDef = jobInstance.jobs[jobNumber]\r\n            // console.log(\"job def is\", jobDef);\r\n            // Get the first one out.\r\n            const firstJob = jobDef.splice(0,2);\r\n            // console.log(`Current Job for Job Number ${jobNumber}  :` ,firstJob)\r\n            const machine = firstJob[0];\r\n            const time = firstJob[1]\r\n            console.log(machine);\r\n            // Now fill Gantt Chart\r\n            const firstAvailableTimeOnMachine = ganttChart[machine].length === 0 ? 0 : ganttChart[machine][ganttChart[machine].length -1]\r\n            // What is the last time of dependent job? We can find that out dependent jobs by looking at job instance from before...\r\n            const _lastJobTime = lastJobTime[jobNumber]\r\n            const firstAvailableTime = Math.max(_lastJobTime,firstAvailableTimeOnMachine)\r\n            lastJobTime[jobNumber] = firstAvailableTime+time\r\n            \r\n            const ganttSchedule = [jobNumber,firstAvailableTime+1,firstAvailableTime+time ]\r\n            ganttChart[machine] = [...ganttChart[machine], ...ganttSchedule]\r\n            \r\n        })\r\n    \r\n        //console.log(ganttChart)\r\n\r\n        return new JSSPGanttChartSolution(ganttChart)\r\n    }\r\n}\r\n\r\nfunction FishesYatesShuffle(array) {\r\n    var currentIndex = array.length, temporaryValue, randomIndex;\r\n  \r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n  \r\n      // Pick a remaining element...\r\n      randomIndex = Math.floor(Math.random() * currentIndex);\r\n      currentIndex -= 1;\r\n  \r\n      // And swap it with the current element.\r\n      temporaryValue = array[currentIndex];\r\n      array[currentIndex] = array[randomIndex];\r\n      array[randomIndex] = temporaryValue;\r\n    }\r\n  \r\n    return array;\r\n}\r\n\r\nfunction generateRandom1D(numMachines, numJobs) {\r\n    // We want each jobs repetead numMachines of times. \r\n    let jobs = []\r\n    for(let i = 0;i < numJobs; i++){\r\n        const values = new Array(numMachines).fill(i) // Fill with Job Number \r\n        jobs = [...jobs, ...values]\r\n    }\r\n    const jssp1d = new JSSP1DEncoding(FishesYatesShuffle(jobs))\r\n    return jssp1d\r\n    console.log(jobs)\r\n}\r\n\r\nexport {\r\n    JSSPProblemInstance,\r\n    JSSPGanttChartSolution,\r\n    JSSP1DEncoding,\r\n    FishesYatesShuffle,\r\n    generateRandom1D,\r\n    jobObjectToArrayOfArray,\r\n    generateProblemInstance\r\n}\r\n","import React from 'react';\r\n\r\nclass JobSetup extends React.Component {\r\n    \r\n\r\n    render(){\r\n        return(<p>I M Job Setup </p>)\r\n    }\r\n}\r\n\r\nexport default JobSetup","import React from 'react';\r\n\r\nclass GanttXTicks extends React.Component {\r\n    render(){\r\n        const parentStyle = {\r\n            position:'relative',\r\n            top:`${(this.props.index) * 25}px`,\r\n        }\r\n        const ticks = []\r\n        const startTickStyle = {\r\n            left:0,\r\n            transition: 'all 0.5s linear',\r\n            position:'absolute'\r\n        }\r\n        const startTick = <span key={0} style={startTickStyle}>\r\n            <div>|</div>\r\n            <div>0</div>\r\n        </span>\r\n        ticks.push(startTick)\r\n        for(let i = 1; i<this.props.maxTime; i++){\r\n            const _startpx = 100* i / this.props.maxTime\r\n            const style = {\r\n                left:`${_startpx}%`,\r\n                transition: 'all 0.5s linear',\r\n                position:'absolute'\r\n            }\r\n            if(i%10 === 0){\r\n                const tick = <span key= {_startpx} style={style}>\r\n                    <div>|</div>\r\n                    <div>{i}</div>\r\n                    </span>\r\n                ticks.push(tick);\r\n            }\r\n        }\r\n        const endTickStyle = {\r\n            left:'100%',\r\n            transition: 'all 0.5s linear',\r\n            position:'absolute'\r\n        }\r\n        const endTick = <span key={100} style={endTickStyle}>\r\n            <div>|</div>\r\n            <div>{this.props.maxTime}</div>\r\n        </span>\r\n        ticks.push(endTick)\r\n        return (\r\n            <div style={parentStyle}>\r\n                {ticks}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default GanttXTicks","import React from 'react';\r\nimport GanttMachineSchedule from './GanttMachineSchedule';\r\nimport GanttXTicks from './GanttXTicks';\r\n\r\nfunction GanttChart(props) {\r\n    const allEnds = props.schedule\r\n                        .filter(schArr => schArr.length > 0)\r\n                        .map(schArr => schArr[schArr.length-1])\r\n    const maxTime = Math.max(...allEnds)\r\n    return (\r\n    \r\n        <div className=\"ganttChartWithY\">\r\n            <div className=\"ganttChartYAxis\">\r\n\r\n                {props.machines.map( (machine,idx)=>{\r\n                    return <span key={machine.id} className=\"yAxisTick\">{`${machine.name} Machine`}</span>\r\n                })}\r\n\r\n            </div>\r\n            <div className=\"ganttChartData\">\r\n                {props.schedule.map( (sch,idx) => \r\n                    <GanttMachineSchedule key={idx} schedule={sch} maxTime={maxTime} index={idx}/>)}\r\n                <GanttXTicks index={props.schedule.length} maxTime={maxTime} />\r\n            </div>\r\n        </div>\r\n        \r\n    )\r\n    \r\n}\r\nexport default GanttChart\r\n","const workercode = () => {\r\n    /**\r\n     * Compiled Code -> ES3\r\n     */\r\n    // var __assign = (this && this.__assign) || function () {\r\n    //     __assign = Object.assign || function(t) {\r\n    //         for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n    //             s = arguments[i];\r\n    //             for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n    //                 t[p] = s[p];\r\n    //         }\r\n    //         return t;\r\n    //     };\r\n    //     return __assign.apply(this, arguments);\r\n    // };\r\n    // var __spreadArrays = function () {\r\n    //     for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    //     for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n    //         for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n    //             r[k] = a[j];\r\n    //     return r;\r\n    // };\r\n    var ResourceTypeEnum;\r\n    (function (ResourceTypeEnum) {\r\n        ResourceTypeEnum[ResourceTypeEnum[\"MACHINE\"] = 0] = \"MACHINE\";\r\n        ResourceTypeEnum[ResourceTypeEnum[\"PERSON\"] = 1] = \"PERSON\";\r\n    })(ResourceTypeEnum || (ResourceTypeEnum = {}));\r\n    var ComplexOperationTypeEnum;\r\n    (function (ComplexOperationTypeEnum) {\r\n        ComplexOperationTypeEnum[ComplexOperationTypeEnum[\"SIMPLE\"] = 0] = \"SIMPLE\";\r\n        ComplexOperationTypeEnum[ComplexOperationTypeEnum[\"CAN_RUN_IN_PARALLEL\"] = 1] = \"CAN_RUN_IN_PARALLEL\";\r\n        ComplexOperationTypeEnum[ComplexOperationTypeEnum[\"CAN_RUN_IN_MULTIPLE_MACINES\"] = 2] = \"CAN_RUN_IN_MULTIPLE_MACINES\";\r\n    })(ComplexOperationTypeEnum || (ComplexOperationTypeEnum = {}));\r\n    var JobShopAlgorithmEnum;\r\n    (function (JobShopAlgorithmEnum) {\r\n        JobShopAlgorithmEnum[JobShopAlgorithmEnum[\"RANDOM\"] = 0] = \"RANDOM\";\r\n        JobShopAlgorithmEnum[JobShopAlgorithmEnum[\"HILL_CLIMBING\"] = 1] = \"HILL_CLIMBING\";\r\n        JobShopAlgorithmEnum[JobShopAlgorithmEnum[\"HILL_CLIMBING_WITH_RESTARTS\"] = 2] = \"HILL_CLIMBING_WITH_RESTARTS\";\r\n        // GENETIC_ALGORITHM\r\n    })(JobShopAlgorithmEnum || (JobShopAlgorithmEnum = {}));\r\n    var RandomAlgorithmEnum;\r\n    (function (RandomAlgorithmEnum) {\r\n        RandomAlgorithmEnum[RandomAlgorithmEnum[\"FISHERYATES\"] = 0] = \"FISHERYATES\";\r\n        RandomAlgorithmEnum[RandomAlgorithmEnum[\"NORANDOM\"] = 1] = \"NORANDOM\"; // this will cause every simulation to run with same job ... only used for benchmarking...\r\n    })(RandomAlgorithmEnum || (RandomAlgorithmEnum = {}));\r\n    var MaterialEnum;\r\n    (function (MaterialEnum) {\r\n        MaterialEnum[MaterialEnum[\"ACETAL\"] = 0] = \"ACETAL\";\r\n        MaterialEnum[MaterialEnum[\"PP\"] = 1] = \"PP\";\r\n    })(MaterialEnum || (MaterialEnum = {}));\r\n    var JobShopProblem = /** @class */ (function () {\r\n        function JobShopProblem() {\r\n            this.resources = new Map();\r\n            this.jobs = new Map();\r\n            this.maxNumberOfSimulations = 100000; // default unless set otherwise\r\n            this.maxSecondsToRun = 30; // default unless set otherwise.\r\n            this.algorithm = JobShopAlgorithmEnum.RANDOM;\r\n            this.hillClimbingRandomRestartPercent = 1; // default use random in 1 percents of the calls. \r\n            this.totalRestarts = 0;\r\n            this.terminationCriteriaFuncs = this.generateDefaultTerminationCriteriaFunctions();\r\n            this.bestMakeSpanLocal = Infinity;\r\n            this.randomAlgorithm = RandomAlgorithmEnum.FISHERYATES;\r\n        }\r\n        JobShopProblem.prototype.addJob = function (job) {\r\n            this.jobs.set(job.id, job);\r\n            // this.calculateNumberOfOperations()\r\n        };\r\n        JobShopProblem.prototype.addOperation = function (jobKey) { };\r\n        JobShopProblem.prototype.updateOperation = function (jobKey) { };\r\n        /**\r\n         * Returns ID of the newly added Machine\r\n         * @param name\r\n         * @param tags\r\n         */\r\n        JobShopProblem.prototype.addMachine = function (name,id,tags) {\r\n            id = id ? id : Array.from(this.resources.keys()).reduce(function (prev, curr) { return curr >= prev ? curr + 1 : prev; }, 0);\r\n            var machine = { id: id, name: name, type: ResourceTypeEnum.MACHINE };\r\n            this.resources.set(id, machine);\r\n            return id;\r\n        };\r\n        JobShopProblem.prototype.addResource = function (resource) {\r\n            if (!resource.id) {\r\n                var id = Array.from(this.resources.keys()).reduce(function (prev, curr) { return curr >= prev ? curr + 1 : prev; }, 0);\r\n                resource.id = id\r\n                this.resources.set(id, resource);\r\n                return id;\r\n            }\r\n            else {\r\n                this.resources.set(resource.id, resource);\r\n                return resource.id;\r\n            }\r\n        };\r\n        JobShopProblem.prototype.setSolutionParameters = function (params) {\r\n            if (params.maxNumberOfSimulations) {\r\n                this.maxNumberOfSimulations = params.maxNumberOfSimulations;\r\n            }\r\n            if (params.maxSecondsToRun) {\r\n                this.maxSecondsToRun = params.maxSecondsToRun;\r\n            }\r\n            if (params.algorithm) {\r\n                this.algorithm = params.algorithm;\r\n            }\r\n            if (params.hillClimbingRandomRestartPercent) {\r\n                this.hillClimbingRandomRestartPercent = params.hillClimbingRandomRestartPercent;\r\n            }\r\n            if (params.randomAlgorithm) {\r\n                this.randomAlgorithm = params.randomAlgorithm;\r\n            }\r\n        };\r\n        JobShopProblem.prototype.addTerminationCriteria = function (terminationFunction) {\r\n            // add a new termination criteria\r\n            this.terminationCriteriaFuncs.push(terminationFunction);\r\n            return this.terminationCriteriaFuncs;\r\n        };\r\n        /**\r\n         * SOLVER FUNCTIONS\r\n         */\r\n        JobShopProblem.prototype.isOperationComplex = function (operation) {\r\n            return operation.hasOwnProperty(\"type\") && operation.hasOwnProperty(\"operations\");\r\n        };\r\n        JobShopProblem.prototype.FisherYatesShuffle = function (array) {\r\n            var currentIndex = array.length, temporaryValue, randomIndex;\r\n            // While there remain elements to shuffle...\r\n            while (0 !== currentIndex) {\r\n                // Pick a remaining element...\r\n                randomIndex = Math.floor(Math.random() * currentIndex);\r\n                currentIndex -= 1;\r\n                // And swap it with the current element.\r\n                temporaryValue = array[currentIndex];\r\n                array[currentIndex] = array[randomIndex];\r\n                array[randomIndex] = temporaryValue;\r\n            }\r\n            return array;\r\n        };\r\n        // UNUSED ... TODO > recursively count operations until everthing is counted correctly .... \r\n        JobShopProblem.prototype.countOperations = function (job) {\r\n            var _this = this;\r\n            var count = 0;\r\n            job.operations.forEach(function (op) {\r\n                if (_this.isOperationComplex(op)) {\r\n                    var _op = op;\r\n                    if (_op.type === ComplexOperationTypeEnum.CAN_RUN_IN_PARALLEL) {\r\n                        var _operations = _op.operations;\r\n                        count += _operations.length;\r\n                    }\r\n                    else {\r\n                        count += 1;\r\n                    }\r\n                }\r\n                else {\r\n                    count += 1;\r\n                }\r\n            });\r\n            //console.log(\"number of operations is \", count);\r\n            return count;\r\n        };\r\n        JobShopProblem.prototype.oneDToGanttChart = function (oned) {\r\n            var _this = this;\r\n            var ganttChartMachineMap = new Map(); // number is machine ID,  and number[] is schedule for machine. [ Job id, starttime, endTime, ...repeat ]\r\n            this.resources.forEach(function (value, key) {\r\n                ganttChartMachineMap.set(key, []);\r\n            });\r\n            var jobOperationIndexTrackingMap = new Map(); // could do this with array. just easier to read with Map\r\n            this.jobs.forEach(function (value, key) {\r\n                jobOperationIndexTrackingMap.set(key, 0); // start on zero index as in first operation.\r\n            });\r\n            var jobEarliestStartMap = new Map();\r\n            this.jobs.forEach(function (value, key) {\r\n                jobEarliestStartMap.set(key, 0);\r\n            });\r\n            // Helper to add operation \r\n            var addOperationToSchedule = function (operation, jobId) {\r\n                var scheduleSoFar = ganttChartMachineMap.get(operation.machine);\r\n                var earliestMachineAvailableTime = scheduleSoFar.length === 0 ? 0 : scheduleSoFar[scheduleSoFar.length - 1] + 1;\r\n                var earliestJobStartTime = jobEarliestStartMap.get(jobId);\r\n                var job = _this.jobs.get(jobId);\r\n                var startTime = Math.max(earliestMachineAvailableTime, earliestJobStartTime);\r\n                var endTime = startTime + (operation.time * job.requiredInventory);\r\n                if (scheduleSoFar.length === 0) {\r\n                    ganttChartMachineMap.set(operation.machine, [jobId, startTime, endTime]);\r\n                }\r\n                else {\r\n                    scheduleSoFar.push(jobId);\r\n                    scheduleSoFar.push(startTime);\r\n                    scheduleSoFar.push(endTime);\r\n                    ganttChartMachineMap.set(operation.machine, scheduleSoFar);\r\n                    //ganttChartMachineMap.set(operation.machine, [...scheduleSoFar, jobId, startTime, endTime]);\r\n                }\r\n                return endTime;\r\n            };\r\n            oned.forEach(function (jobId, idx, arr) {\r\n                var job = _this.jobs.get(jobId);\r\n                var operationIndex = jobOperationIndexTrackingMap.get(jobId);\r\n                var operation = job.operations[operationIndex];\r\n                // adding to schedule \r\n                if (_this.isOperationComplex(operation)) {\r\n                    var complexOperation = operation; // Cast to complex operation type\r\n                    if (complexOperation.type === ComplexOperationTypeEnum.CAN_RUN_IN_PARALLEL) {\r\n                        var endTimes = complexOperation.operations.map(function (operation, idx) {\r\n                            var endTime = addOperationToSchedule(operation, jobId);\r\n                            return endTime;\r\n                        });\r\n                        var maxEndTime = Math.max.apply(Math, endTimes);\r\n                        jobEarliestStartMap.set(jobId, maxEndTime + 1);\r\n                    }\r\n                    else if (complexOperation.type === ComplexOperationTypeEnum.CAN_RUN_IN_MULTIPLE_MACINES) {\r\n                        var randomlyChoosenOperationFromMultipleMachineOptions = complexOperation.operations[Math.floor(Math.random() * complexOperation.operations.length)];\r\n                        var endTime = addOperationToSchedule(randomlyChoosenOperationFromMultipleMachineOptions, jobId); // cast before sending .\r\n                        jobEarliestStartMap.set(jobId, endTime + 1);\r\n                    }\r\n                    else {\r\n                        throw new Error(\"Type not supported yet\");\r\n                    }\r\n                }\r\n                else {\r\n                    // if operation is not complex, we simply add the operation to the schedule.\r\n                    var _operation = operation;\r\n                    var endTime = addOperationToSchedule(_operation, jobId);\r\n                    jobEarliestStartMap.set(jobId, endTime + 1);\r\n                }\r\n                // at the end, incremebt the index of operation ...\r\n                // Open Question? What if the job is of type CAN_BE_SPLIT in 4 equal parts?\r\n                jobOperationIndexTrackingMap.set(jobId, operationIndex + 1);\r\n            });\r\n            return ganttChartMachineMap;\r\n        };\r\n        JobShopProblem.prototype.onedArrayOfJobs = function () {\r\n            var _this = this;\r\n            var getRandomArrayOfJobs = function () {\r\n                var arr = [];\r\n                _this.jobs.forEach(function (v, k) {\r\n                    var opcount = v.operations.length;\r\n                    var a = new Array(opcount).fill(k);\r\n                    arr = arr.concat(a);\r\n                });\r\n                //console.log(\"returning array \", arr)\r\n                // return arr\r\n                if (_this.randomAlgorithm === RandomAlgorithmEnum.NORANDOM) {\r\n                    return arr;\r\n                }\r\n                arr = _this.FisherYatesShuffle(arr);\r\n                return arr;\r\n            };\r\n            var swap = function (base) {\r\n                var randi = Math.floor(Math.random() * base.length);\r\n                var randj = Math.floor(Math.random() * base.length);\r\n                while (base[randi] === base[randj]) { // no point in swapping the same number.\r\n                    randj = Math.floor(Math.random() * base.length);\r\n                }\r\n                var randiVal = base[randi];\r\n                base[randi] = base[randj];\r\n                base[randj] = randiVal;\r\n                return base;\r\n            };\r\n            if (!this.best1Dsolution) {\r\n                return getRandomArrayOfJobs();\r\n            }\r\n            if (this.algorithm === JobShopAlgorithmEnum.RANDOM) {\r\n                return getRandomArrayOfJobs();\r\n            }\r\n            else if (this.algorithm === JobShopAlgorithmEnum.HILL_CLIMBING) {\r\n                return swap(this.best1Dsolution);\r\n            }\r\n            else if (this.algorithm === JobShopAlgorithmEnum.HILL_CLIMBING_WITH_RESTARTS) {\r\n                var randomPercent = Math.random() * 100;\r\n                // eg: percent = 20.There is a 20% chance that randomPercent is 20 or less. \r\n                // so if randomPercent is 20 or less, we add randomness, else we keep hill climbing. \r\n                var useRandom = randomPercent < this.hillClimbingRandomRestartPercent ? true : false;\r\n                if (useRandom) {\r\n                    this.totalRestarts += 1;\r\n                    //makeSpansForCsv.push(90000)\r\n                    var oned = getRandomArrayOfJobs();\r\n                    this.best1DSolutionLocal = oned; //rest best1DSolutionLocal\r\n                    this.bestMakeSpanLocal = Infinity;\r\n                    return oned;\r\n                }\r\n                else {\r\n                    return swap(this.best1DSolutionLocal);\r\n                }\r\n            }\r\n            else {\r\n                throw new Error(\"Not implemented\");\r\n            }\r\n        };\r\n        JobShopProblem.prototype.costFunction = function (ganttChart) {\r\n            var makeSpan = Array.from(ganttChart.values()).reduce(function (prev, currentListOfSchedules) {\r\n                var lastTime = currentListOfSchedules[currentListOfSchedules.length - 1];\r\n                if (lastTime > prev) {\r\n                    return lastTime;\r\n                }\r\n                return prev;\r\n            }, 0);\r\n            return makeSpan;\r\n        };\r\n        JobShopProblem.prototype.generateDefaultTerminationCriteriaFunctions = function () {\r\n            var funcs = [];\r\n            if (this.maxNumberOfSimulations) {\r\n                var terminateBasedOnNumberOfSimulations = function (args) {\r\n                    if (args.currentSimulationIndex >= args.maxNumberOfSimulations) {\r\n                        return true;\r\n                    }\r\n                    return false; //otherwise return false\r\n                };\r\n                funcs.push(terminateBasedOnNumberOfSimulations);\r\n            }\r\n            if (this.maxSecondsToRun) {\r\n                var terminateBasedOnMaxSecondsSinceStart = function (args) {\r\n                    var terminationTime = new Date(args.simulationStartTime.getTime());\r\n                    terminationTime.setSeconds(terminationTime.getSeconds() + args.maxSecondsToRun);\r\n                    if (new Date() > terminationTime) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                };\r\n                funcs.push(terminateBasedOnMaxSecondsSinceStart);\r\n            }\r\n            return funcs;\r\n        };\r\n        JobShopProblem.prototype.solve = function (postMessage) {\r\n            console.log(\"solving\");\r\n            var currentSimCount = 0;\r\n            var terminateNow;\r\n            var bestGanttChart;\r\n            var bestMakeSpan = +Infinity;\r\n            var bestMakeSpanIndex = 0;\r\n            var localMakeSpanHistory = [[],[]];\r\n            var bestMakeSpanHistory = [[],[]] // first array is for x-axis or sim count, second is for y-axis or makespan\r\n            var defaultTerminationArgs = {\r\n                currentSimulationIndex: currentSimCount,\r\n                simulationStartTime: new Date(),\r\n                maxNumberOfSimulations: this.maxNumberOfSimulations,\r\n                maxSecondsToRun: this.maxSecondsToRun,\r\n                algorithm: this.algorithm\r\n            };\r\n            while (!terminateNow) {\r\n                // Update current Sim Count to run on termination criteria functions.\r\n                defaultTerminationArgs.currentSimulationIndex = currentSimCount;\r\n                var terminatedList = this.terminationCriteriaFuncs.map(function (f) { return f(defaultTerminationArgs); });\r\n                terminateNow = terminatedList.reduce(function (prev, curr) { return curr ? true : prev; }, false);\r\n                // print to screen every so often\r\n                // if (currentSimCount % 10) {\r\n                //     process.stdout.write(\"Running simulation \" + currentSimCount + \" of \" + this.maxNumberOfSimulations + \". RS \" + this.totalRestarts + \" Best MakeSpan so far \" + bestMakeSpan + \" on simulation number \" + bestMakeSpanIndex + \" \\r\");\r\n                // }\r\n\r\n                var oned = this.onedArrayOfJobs();\r\n                var ganttChart = this.oneDToGanttChart(oned);\r\n                var makespan = this.costFunction(ganttChart);\r\n\r\n                if(this.bestMakeSpanLocal === Infinity){\r\n                    // Adding this just to make chart loook like there is a real restart for cases with hill climbing with restart\r\n                    localMakeSpanHistory[0].push(currentSimCount - 1);\r\n                    localMakeSpanHistory[1].push(bestMakeSpan);\r\n                }\r\n                //console.log(\"makespan is \", makespan)\r\n                if (makespan < bestMakeSpan) {\r\n                    // output global makespan value here.\r\n                    bestMakeSpan = makespan;\r\n                    bestGanttChart = ganttChart;\r\n                    this.best1Dsolution = oned;\r\n                    bestMakeSpanIndex = currentSimCount;\r\n\r\n                    postMessage(\"Got New MakeSpan\")\r\n                    const returnData = {\r\n                        'type':'newSchedule',\r\n                        'schedule':bestGanttChart,\r\n                        'makeSpan':makespan,\r\n                        \"minMakeSpanDetectedIteration\": currentSimCount\r\n                    }\r\n                    postMessage(returnData);\r\n                    sleep(1000) // Allow time for UI to update\r\n                    bestMakeSpanHistory[0].push(currentSimCount);\r\n                    bestMakeSpanHistory[1].push(makespan);\r\n                }\r\n                if (this.algorithm === JobShopAlgorithmEnum.HILL_CLIMBING_WITH_RESTARTS) {\r\n                    if (makespan < this.bestMakeSpanLocal) {\r\n                        // send makespan value here for hill climbing with restarts...\r\n                        this.bestMakeSpanLocal = makespan;\r\n                        this.best1DSolutionLocal = oned;\r\n                        localMakeSpanHistory[0].push(currentSimCount);\r\n                        localMakeSpanHistory[1].push(makespan);\r\n                    }\r\n                }\r\n                currentSimCount += 1;\r\n\r\n                /**\r\n                 * CODE FOR LOGGING TO THE UI \r\n                 */\r\n                let send;\r\n                if(currentSimCount < 100){\r\n                    send = currentSimCount % 1 === 0\r\n                } else if (currentSimCount < 1000){\r\n                    send = currentSimCount % 100 === 0\r\n                } else if (currentSimCount < 10000) {\r\n                    send = currentSimCount % 1000 === 0\r\n                } else if (currentSimCount % 100000) {\r\n                    send = currentSimCount % 100000 === 0\r\n                } else {\r\n                    send = currentSimCount % 250000 === 0\r\n                }\r\n                if(send){\r\n                    const returnData = {\r\n                        type:'iterationCount',\r\n                        iteration:currentSimCount,\r\n                        localMakeSpanHistory:localMakeSpanHistory,\r\n                        bestMakeSpanHistory: bestMakeSpanHistory\r\n                    }\r\n                    postMessage(returnData);\r\n                    //sleep(200) // Give UI thread enough time to render this.\r\n                    localMakeSpanHistory[0].length = 0 // delete the array\r\n                    localMakeSpanHistory[1].length = 0 // delete the array\r\n                    bestMakeSpanHistory[0].length = 0;\r\n                    bestMakeSpanHistory[1].length = 0;\r\n                }\r\n            }\r\n            // clear one last time ... \r\n            if(bestMakeSpanHistory.length > 0 ){\r\n                console.log(\"sending last round of data.\")\r\n                bestMakeSpanHistory[0].push(currentSimCount);\r\n                bestMakeSpanHistory[1].push(bestMakeSpan);                \r\n                localMakeSpanHistory[0].push(currentSimCount);\r\n                localMakeSpanHistory[1].push(bestMakeSpan);\r\n                const returnData = {\r\n                    type:'iterationCount',\r\n                    iteration:currentSimCount,\r\n                    bestMakeSpanHistory,\r\n                    localMakeSpanHistory,\r\n                }\r\n                postMessage(returnData);\r\n            }\r\n            // console.log(\"Termination criteria passed\");\r\n            // console.log(\"shortest makespan is \", bestMakeSpan);\r\n            // console.log(bestGanttChart)\r\n            return {\r\n                bestGanttChart: bestGanttChart,\r\n                bestMakeSpan: bestMakeSpan,\r\n                bestMakeSpanIndex: bestMakeSpanIndex\r\n            };\r\n        };\r\n        return JobShopProblem;\r\n    }());\r\n    \r\n    function sleep(miliseconds) { \r\n        /**\r\n         * Evil sleep function used for demoing simulation.\r\n         * Since the example problem I am using solves really fast, I am adding sleep in the thread.\r\n         * TODO >> Actually use setTimeOut to accomplish the same thing so thread isn't running while waiting.\r\n         */\r\n        var currentTime = new Date().getTime();\r\n     \r\n        while (currentTime + miliseconds >= new Date().getTime()) {\r\n        }\r\n     }\r\n\r\n    onmessage = function(e) {\r\n        const that = this;\r\n        const { problem, algorithmRepetition, algorithmMaxTimeSecs, algorithmType, machines, jobs } = e.data; \r\n        // console.log(problem, algorithmMaxTimeSecs);\r\n        // _runOptimizationAlgo(problem, algorithmRepetition, algorithmMaxTimeSecs, algorithmType, that)\r\n        const jsspSolver = new JobShopProblem();\r\n\r\n        machines.forEach((machine, index) => {\r\n            jsspSolver.addMachine(machine.name, machine.id)\r\n        })\r\n        jobs.forEach((job, index) => {\r\n            const operations = []\r\n            job.operations.forEach((operation, index) => {\r\n                if(operation.machineAndTimes.length === 0){\r\n                    return\r\n                }\r\n                if(operation.machineAndTimes.length > 1){\r\n                    // add complex operation \r\n                    const complexOperation = {\r\n                        type: ComplexOperationTypeEnum.CAN_RUN_IN_MULTIPLE_MACINES,\r\n                        operations: operation.machineAndTimes.map(mat => {\r\n                            return {\r\n                                machine: parseInt(mat[0]),\r\n                                time: parseInt(mat[1])\r\n                            }\r\n                        })\r\n                    }\r\n                    operations.push(complexOperation)\r\n                } else {\r\n                    // add simple operation\r\n                    operations.push({\r\n                        machine: parseInt(operation.machineAndTimes[0][0]),\r\n                        time: parseInt(operation.machineAndTimes[0][0])\r\n                    })\r\n                }\r\n            })\r\n            jsspSolver.addJob({\r\n                id: job.id,\r\n                name: job.name,\r\n                operations: operations,\r\n                requiredInventory: 1\r\n            })\r\n        })\r\n        let algo;\r\n        if(algorithmType === \"random\"){\r\n            algo = JobShopAlgorithmEnum.RANDOM\r\n        } else if (algorithmType === \"hillClimbing\"){\r\n            algo = JobShopAlgorithmEnum.HILL_CLIMBING\r\n        } else {\r\n            algo = JobShopAlgorithmEnum.HILL_CLIMBING_WITH_RESTARTS\r\n        }\r\n        const solParams = {\r\n            maxNumberOfSimulations:algorithmRepetition,\r\n            maxSecondsToRun: algorithmMaxTimeSecs,\r\n            algorithm: algo,\r\n            hillClimbingRandomRestartPercent: 0.1, // restart 0.0001 percent of the time. Gives the algorithm enough time to discover a local minima.\r\n            randomAlgorithm: RandomAlgorithmEnum.FISHERYATES\r\n            // Smaller than number better chance the algorithm has to discover local minima... important during large \r\n        }\r\n    \r\n        jsspSolver.setSolutionParameters(solParams)\r\n        const bestGanttChart = jsspSolver.solve(this.postMessage);\r\n        console.log(\"returning bestGanttChart\")\r\n        console.log(bestGanttChart)\r\n        var workerResult = 'Received from main: ' + (e.data);\r\n        this.postMessage(workerResult);\r\n    }\r\n};\r\n\r\nlet code = workercode.toString();\r\ncode = code.substring(code.indexOf(\"{\")+1, code.lastIndexOf(\"}\"));\r\n\r\nconst blob = new Blob([code], {type: \"application/javascript\"});\r\nconst worker_script = URL.createObjectURL(blob);\r\nconsole.log(\"generated worker script is \", worker_script)\r\nexport default worker_script;\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport '../node_modules/react-vis/dist/style.css';\r\nimport {XYPlot, LineSeries, HorizontalGridLines, VerticalGridLines, XAxis, YAxis} from 'react-vis';\r\n\r\nclass TwoDPlot extends Component {\r\n  render() {\r\n    // Get props.data = [123,345,345,999 ...] from parent. \r\n    const data = this.props.data.map((val,idx)=>{\r\n      return {\r\n        x: idx,\r\n        y: val\r\n      }\r\n    })\r\n\r\n    return (\r\n      <div className=\"twodplot\">\r\n        <div>\r\n          <XYPlot height={this.props.height || 300} width={this.props.width || 300}>\r\n            <LineSeries data={data} />\r\n            <XAxis title=\"Number of Iterations\" />\r\n            <YAxis title=\"MakeSpan\" />\r\n            <VerticalGridLines />\r\n            <HorizontalGridLines />\r\n          </XYPlot>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TwoDPlot\r\n","import React from 'react';\r\nimport './App.css';\r\nimport GanttChart from './GattChart';\r\nimport jobIdToColour from './jobIdToColor';\r\nimport WebWorkerScript from './worker';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { JSSPProblemInstance } from './JSSP';\r\nimport { NavBar } from './components/navbar';\r\nimport TwoDPlot from './TwoDPlot';\r\nimport  { jobObjectToArrayOfArray, generateProblemInstance } from './JSSP';\r\nimport uPlot from \"uplot\";\r\nimport \"uplot/dist/uPlot.min.css\";\r\n\r\n\r\n// Create a new instance of JSSPProblemInstance and assign jobs for water bottle plant.\r\n\r\nconst problemStatic = new JSSPProblemInstance(5,6) // Instantiate with no data. j jobs and m machines.\r\n/**\r\n * Water Bottoling Plant that does 4 different types of water bottles. \r\n * Job 0 - Spring Water 16oz\r\n * Job 1 - Distilled Water 16 oz\r\n * Job 2 - Distilled Water 32 oz\r\n * Job 4 - Bottoled Water 32 oz\r\n * \r\n * We have 5 machines for different operations\r\n * Machine 0 - Bottle Expansion Molding\r\n * Machine 1 - Water Cleaning or purifying Machine \r\n * Machine 2 - Pouring water / Filling Process \r\n * Machine 3 - Capping\r\n * Machine 4 - Labelling\r\n * \r\n * Jobs must be run in the following order\r\n//  */\r\nproblemStatic.jobs = [\r\n  // Read it as follows:\r\n  // first job -> first step can run on 2 machines. Machine 0 for time 10 OR Machine 5 for time 20, next it runs on 1 machine - machine 1 for time 10 etc.\r\n  [2, 0, 10, 5, 20, 1, 1, 10, 1, 2, 10, 1, 3, 10, 1, 4, 8, 1, 4, 10, 1, 4, 10],\r\n  // second Job -> first step can run on 2 machines. Machine 0 for time 50 OR machine 5 for time 30, second step on 1 machine - machine 1 for 15 times\r\n  [2, 0, 50, 5, 30, 1, 1, 15, 1, 2, 10, 1, 3, 10,],// 1, 4, 16], // Very Very Flexible...\r\n  [2, 0, 30, 5, 50, 1, 1, 12, 1, 2, 20, 1, 3, 10, 1, 4, 16],\r\n  [2, 0, 15, 5, 20, 1, 1, 30, 1, 2, 20, 1, 3, 10, 1, 4, 10],\r\n  [1, 2, 120]\r\n]\r\n\r\n// Infer number of machines the job needs to run based on job definition.\r\nproblemStatic.numMachineByJobs = []\r\nproblemStatic.jobs.forEach(jobDefArr => {\r\n  let numMachines = 0\r\n  let nextIndexToCheck = 0;\r\n  for(let i = 0; i < jobDefArr.length; i++ ){\r\n    if(i === nextIndexToCheck){\r\n      numMachines += 1\r\n      nextIndexToCheck = i + jobDefArr[i]*2 + 1\r\n    }\r\n  }\r\n  problemStatic.numMachineByJobs.push(numMachines)\r\n})\r\n// Example Problem Statement\r\n// problem.jobs = [ \r\n//   [ 0, 10, 1, 20, 2, 20, 3, 40, 4, 10 ],\r\n//   [ 1, 20, 0, 10, 3, 30, 2, 50, 4, 30 ],\r\n//   [ 2, 30, 1, 20, 4, 12, 3, 40, 0, 10 ],\r\n//   [ 4, 50, 3, 30, 2, 15, 0, 20, 1, 15 ] ]\r\n\r\n// Complicated Problem Statement -> Uncomment below..\r\n// problem.numJobs = 10\r\n// problem.numMachines = 10\r\n// problem.jobs = [\r\n// [ 4, 88, 8, 68, 6, 94, 5, 99, 1, 67, 2, 89, 9, 77, 7, 99, 0, 86, 3, 92 ],\r\n// [ 5, 72, 3, 50, 6, 69, 4, 75, 2, 94, 8, 66, 0, 92, 1, 82, 7, 94, 9, 63 ],\r\n// [ 9, 83, 8, 61, 0, 83, 1, 65, 6, 64, 5, 85, 7, 78, 4, 85, 2, 55, 3, 77 ],\r\n// [ 7, 94, 2, 68, 1, 61, 4, 99, 3, 54, 6, 75, 5, 66, 0, 76, 9, 63, 8, 67 ],\r\n// [ 3, 69, 4, 88, 9, 82, 8, 95, 0, 99, 2, 67, 6, 95, 5, 68, 7, 67, 1, 86 ],\r\n// [ 1, 99, 4, 81, 5, 64, 6, 66, 8, 80, 2, 80, 7, 69, 9, 62, 3, 79, 0, 88 ],\r\n// [ 7, 50, 1, 86, 4, 97, 3, 96, 0, 95, 8, 97, 2, 66, 5, 99, 6, 52, 9, 71 ],\r\n// [ 4, 98, 6, 73, 3, 82, 2, 51, 1, 71, 5, 94, 7, 85, 0, 62, 8, 95, 9, 79 ],\r\n// [ 0, 94, 6, 71, 3, 81, 7, 85, 1, 66, 2, 90, 4, 76, 5, 58, 8, 93, 9, 97 ],\r\n// [ 3, 50, 0, 59, 1, 82, 8, 67, 7, 56, 9, 96, 6, 58, 4, 81, 5, 59, 2, 96 ]\r\n// ]\r\n\r\nclass App extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      schedule:[[],[]],\r\n      makeSpan:Infinity,\r\n      minMakeSpanDetectedIteration:0,\r\n      iterations:0,\r\n      workerInstance : new Worker(WebWorkerScript),\r\n      makeSpanHistory:[],\r\n      maxAlgorithmRepetition:10000,\r\n      algorithmMaxTimeSecs:30,\r\n      algorithmType: 'hillClimbingRestarts', // random || hillClimbing || hillClimbingRestarts\r\n      uPlotRef: null,\r\n      simulationStartTime: Math.round((new Date()).getTime() / 1000)\r\n    }\r\n  }\r\n  startJobShopWorker = () => {\r\n    this.setState({\r\n      simulationStartTime: Math.round((new Date()).getTime() / 1000)\r\n    })\r\n    console.log(\"started worker\")\r\n    const workerInstance = new Worker(WebWorkerScript);\r\n    \r\n    workerInstance.addEventListener(\"message\", e => {\r\n      // We can have 2 different data types or a generic message stored in e.data\r\n      // {\"type\":\"iterationCount\",\"value\":200}\r\n      // {\"type\":\"newSchedule\",\"value\":[[],...]}\r\n      if(e.data && e.data.type === \"iterationCount\"){\r\n        let dataSource = \"bestMakeSpanHistory\";\r\n        if(this.state.algorithmType === \"hillClimbingRestarts\"){\r\n          dataSource = \"localMakeSpanHistory\";\r\n        }\r\n        let newXData;\r\n        let newYData;\r\n        setTimeout(_=>{\r\n          newXData = [...this.state.uPlotRef.data[0], ...e.data[dataSource][0]]\r\n        })\r\n        setTimeout(_ => {\r\n          newYData = [...this.state.uPlotRef.data[1], ...e.data[dataSource][1]]\r\n        })\r\n        setTimeout(() => {\r\n          this.state.uPlotRef.setData([newXData, newYData], true)\r\n        }, 0)\r\n      }\r\n      else if(e.data && e.data.type === \"newSchedule\"){\r\n        const schedule = []\r\n        e.data.schedule.forEach((value, key) => {\r\n          // console.log(value)\r\n          schedule.push(value)\r\n        })\r\n        this.setState({\r\n          schedule : schedule, \r\n          makeSpan:e.data.makeSpan,\r\n          minMakeSpanDetectedIteration: e.data.minMakeSpanDetectedIteration\r\n        });\r\n      } else {\r\n        //console.log(\"generic Message \", e.data);\r\n      } \r\n    }, false);\r\n    \r\n    const problem = generateProblemInstance(this.props.jobs, this.props.machines);\r\n    // const problem = problemStatic // OLD \r\n    workerInstance.postMessage({\r\n      algorithmRepetition:this.state.maxAlgorithmRepetition,\r\n      problem:problem,\r\n      algorithmMaxTimeSecs:this.state.algorithmMaxTimeSecs,\r\n      algorithmType: this.state.algorithmType,\r\n      machines: this.props.machines, \r\n      jobs: this.props.jobs\r\n    })\r\n\r\n    this.setState({\r\n      workerInstance: workerInstance,\r\n    })\r\n  }\r\n  createChart(){\r\n    const opts = {\r\n      title: \"Best MakeSpan over Time/Simulations\",\r\n      width: window.innerWidth - 40,\r\n      height: 300,\r\n      series: [\r\n        {\r\n          label:\"Simulation Count\"\r\n        },\r\n        {\r\n          stroke:\"rgb(18, 147, 154)\",\r\n          label: \"Makespan\",\r\n          width:2\r\n        },\r\n      ],\r\n      axes:[\r\n        {\r\n          label:\"Simulation Count\"\r\n        },\r\n        {\r\n          label:\"Makespan\"\r\n        }\r\n      ],\r\n      scales: {\r\n        x: {\r\n          time: false\r\n        }\r\n      }\r\n    }\r\n    const uPlotRef = new uPlot(opts, [[null],[null]], document.getElementById(\"uplotChart\"));\r\n    this.setState({\r\n      uPlotRef\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.createChart()\r\n    this.startJobShopWorker()\r\n  }\r\n  componentDidUpdate(prevProps, prevState, snapshot){\r\n    if( (prevProps.jobs !== this.props.jobs) || (prevProps.machines !== this.props.machines) ){\r\n      console.log(\"props changed, so restarting the simulation\")\r\n      this.state.workerInstance.terminate();\r\n      this.startJobShopWorker()\r\n    }\r\n  }\r\n  componentWillUnmount(){\r\n    this.state.workerInstance.terminate();\r\n  }\r\n  handleChange = (event)=>{\r\n    this.setState({[event.target.name]: event.target.value});\r\n  }\r\n\r\n  handleRestartJobShopWorkerButton = (e)=>{\r\n    e.preventDefault();\r\n    this.state.workerInstance.terminate();\r\n    this.state.uPlotRef.setData([[null],[null]])\r\n    this.setState({\r\n      schedule:[[],[]],\r\n      makeSpan:Infinity,\r\n      minMakeSpanDetectedIteration:0,\r\n      iterations:0,\r\n      makeSpanHistory:[],\r\n    },this.startJobShopWorker() )\r\n    \r\n  }\r\n  handleStopWorker = (e) => {\r\n    this.state.workerInstance.terminate();\r\n  }\r\n  render(){\r\n    return (\r\n      <div className=\"App\">\r\n        <nav className=\"d-flex factory-navbar bg-color-app-secondary\">\r\n          <li className=\"nav-item no-list-style\">\r\n            <select className=\"form-control ml-2\" name=\"algorithmType\" onChange={this.handleChange} value={this.state.algorithmType}>\r\n              <option value=\"random\">Random Search</option>\r\n              <option value=\"hillClimbing\">Hill Climbing Search</option>\r\n              <option value=\"hillClimbingRestarts\">Hill Climbing With Restarts</option>\r\n            </select>\r\n          </li> \r\n\r\n          <li className=\"nav-item ml-2 no-list-style\">\r\n            <button className=\"btn btn-outline-danger ml-2\" onClick={this.handleStopWorker}> Stop </button>\r\n          </li>\r\n          \r\n          <li className=\"nav-item ml-2 no-list-style\">\r\n            <button className=\"btn btn-outline-success\" onClick={this.handleRestartJobShopWorkerButton}>  Restart with new settings </button>\r\n          </li>\r\n        </nav>\r\n        \r\n\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <table className=\" table table-sm mt-2\">\r\n                <thead>\r\n                  <tr>\r\n                    <th colSpan={2}>Simulation Parameters </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Number of Simulations</td>\r\n                    <td>{this.state.iterations} </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Minimal Makespan Detected</td>\r\n                    <td>{this.state.makeSpan}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Min detected after iteration</td>\r\n                    <td>{this.state.minMakeSpanDetectedIteration}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n            </div>\r\n            <div className=\"col\">\r\n              <table className=\"table table-sm mt-2\">\r\n                <thead>\r\n                  <tr>\r\n                    <th colSpan={2}>Termination Criteria</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>Number of Simuations</td>\r\n                    <td>\r\n                      <input type=\"number\" style={{width:'4em'}} name=\"maxAlgorithmRepetition\" onChange={this.handleChange} value={this.state.maxAlgorithmRepetition}/>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>Maximum Time in seconds</td>\r\n                    <td>\r\n                      <input type=\"number\" style={{width:'4em'}} name=\"algorithmMaxTimeSecs\" onChange={this.handleChange} value={this.state.algorithmMaxTimeSecs} className=\"form-controll\" placeholder=\"Max number of iterations\"/>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{marginTop:'10px'}}>\r\n          <div id=\"uplotChart\"></div>\r\n        </div>\r\n        <hr></hr>\r\n        <h6>Schedule with the least makespan</h6>\r\n        <GanttChart schedule={this.state.schedule} machines={this.props.machines}/>\r\n        \r\n\r\n        <div className=\"explanation\">\r\n\r\n        <p>\r\n        The Chart above shows the order in which each operation in a water bottling plant must run on each machine to complete all bottling activities in the most efficient manner. \r\n        Watch the chart change as the algorithm finds more and more efficient way to run the factory over time. Simulation is slowed down for demonstration purpose.\r\n        Run the simulations with different settings below: \r\n        </p>\r\n                \r\n        <hr></hr>\r\n        <h3>Explanation</h3>\r\n\r\n          In this demo, we are trying to optimize how to run a water bottling plant. \r\n          <ul>\r\n            <li>The machines and the operations required for each job is listed in the machines tab. Feel free to click there to take a peek.</li>\r\n            <li>The operation sequence for each job is listed under Jobs menu</li>\r\n          </ul>\r\n          We have {this.props.machines.length} machines for different operations, and various different types of products we need to produce.\r\n\r\n\r\n        <ol>\r\n          {this.props.machines.map( (m, idx )=> {\r\n            return <li key={m.id}>\r\n              Machine Id {m.id} - {m.name}\r\n            </li>\r\n          })}\r\n        </ol>\r\n\r\n        This factory produces {this.props.jobs.length} different types of water bottles, and each water bottling operation must be run in the following order:\r\n        <ol>\r\n          {this.props.jobs.map((j,idx)=>{\r\n            return <li key={j.id}>\r\n              <span style={{backgroundColor:`${jobIdToColour(j.id)}`}}>Job id {j.id} - {j.name} </span>\r\n              <ol>\r\n                {j.operations.map((o, idx) => {\r\n                  const allMachineTimes = o.machineAndTimes.map(mt => {\r\n                    return `| ${mt[1]} Seconds if run on Machine ${mt[0]} |`\r\n                  })\r\n                  return <li key={idx}>{o.operationName}\r\n                    - {allMachineTimes}\r\n                  </li>\r\n                })}\r\n              </ol>\r\n            </li>\r\n          })}\r\n          \r\n        </ol>\r\n\r\n        Algorithm that runs in the background finds the most optimal way of running all the jobs in the given order. \r\n\r\n        The Chart shows the order in which each job must run on each machine to complete all bottling activities in the most efficient manner. \r\n        Watch the chart change as the algorithm finds more and more efficient way to run the factory. \r\n\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport MainAppNavBar from './mainAppComponents/mainAppNavBar';\r\nimport Machines from './Pages/Machines';\r\nimport Categories from './Pages/Categories';\r\nimport JobEditor from './Pages/Jobs';\r\nimport Parameters from './mainAppComponents/Parameters';\r\nimport { JSSPProblemInstance } from './JSSP';\r\nimport JobSetup from './JobSetup';\r\nimport \"./styles/util.scss\";\r\nimport App from './App';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  NavLink\r\n} from \"react-router-dom\";\r\n/**\r\n * Main component that handles state of the solver, machines, jobs etc.\r\n */\r\n\r\nclass FactoryOptimizationApp extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    // Hold all the state here.\r\n    this.state = {\r\n      machines: [],\r\n      categories: [],\r\n      jobs: [],\r\n      best_schedule: [],\r\n      makeSpan: 150\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    const jobsStr = '[{\"id\":1,\"name\":\"Spring Water 16oz\",\"operations\":[{\"id\":1,\"operationName\":\"Bottle Expansion\",\"machineAndTimes\":[[1,\"10\"],[\"6\",\"20\"]]},{\"id\":2,\"operationName\":\"Water Purifying\",\"machineAndTimes\":[[\"2\",\"10\"]]},{\"id\":3,\"operationName\":\"Water Filling\",\"machineAndTimes\":[[\"3\",\"10\"]]},{\"id\":4,\"operationName\":\"Bottle Capping\",\"machineAndTimes\":[[\"4\",\"10\"]]},{\"id\":5,\"operationName\":\"Bottle Labeling\",\"machineAndTimes\":[[\"5\",\"8\"]]},{\"id\":6,\"operationName\":\"Bottle Labeling 2\",\"machineAndTimes\":[[\"5\",\"10\"]]},{\"id\":7,\"operationName\":\"Bottle Labeling 3\",\"machineAndTimes\":[[\"5\",\"10\"]]}]},{\"id\":2,\"name\":\"Distilled Water 16oz\",\"operations\":[{\"id\":1,\"operationName\":\"Bottle Expansion\",\"machineAndTimes\":[[1,\"50\"],[\"6\",\"30\"]]},{\"id\":2,\"operationName\":\"Water Purifying\",\"machineAndTimes\":[[\"2\",\"15\"]]},{\"id\":3,\"operationName\":\"Water Filling\",\"machineAndTimes\":[[\"3\",\"10\"]]},{\"id\":4,\"operationName\":\"Bottle Capping\",\"machineAndTimes\":[[\"4\",\"10\"]]}]},{\"id\":3,\"name\":\"Distilled Water 32oz\",\"operations\":[{\"id\":1,\"operationName\":\"Bottle Expansion \",\"machineAndTimes\":[[1,\"30\"],[\"6\",\"50\"]]},{\"id\":2,\"operationName\":\"Water Purifying\",\"machineAndTimes\":[[\"2\",\"12\"]]},{\"id\":3,\"operationName\":\"Water Filling\",\"machineAndTimes\":[[\"3\",\"20\"]]},{\"id\":4,\"operationName\":\"Bottle Capping\",\"machineAndTimes\":[[\"4\",\"10\"]]},{\"id\":5,\"operationName\":\"Bottle Labeling\",\"machineAndTimes\":[[\"5\",\"16\"]]}]},{\"id\":4,\"name\":\"Bottle Water 32oz\",\"operations\":[{\"id\":1,\"operationName\":\"Bottle Expansion \",\"machineAndTimes\":[[1,\"15\"],[\"6\",\"20\"]]},{\"id\":2,\"operationName\":\"Water Purifying\",\"machineAndTimes\":[[\"2\",\"30\"]]},{\"id\":3,\"operationName\":\"Water Filling\",\"machineAndTimes\":[[\"3\",\"20\"]]},{\"id\":4,\"operationName\":\"Bottle Capping\",\"machineAndTimes\":[[\"4\",\"10\"]]},{\"id\":5,\"operationName\":\"Bottle Labeling\",\"machineAndTimes\":[[\"5\",\"10\"]]}]}]'\r\n    const machinesStr = '[{\"name\":\"Bottle Expansion Mold Machine\",\"categories\":[],\"id\":1},{\"name\":\"Water Cleaning Machine\",\"categories\":[],\"id\":2},{\"name\":\"Water Filling Machine\",\"categories\":[],\"id\":3},{\"name\":\"Bottle Capping Machine\",\"categories\":[],\"id\":4},{\"name\":\"Bottle Labeling Machine\",\"categories\":[],\"id\":5},{\"name\":\"Bottle Expansion Mold Machine 2\",\"categories\":[],\"id\":6}]'\r\n    const machines = JSON.parse(localStorage.getItem(\"machines\") || machinesStr );\r\n    const categories = JSON.parse(localStorage.getItem(\"categories\") || \"[]\" );\r\n    const jobs = JSON.parse(localStorage.getItem(\"jobs\") || jobsStr);\r\n    this.setState({\r\n      machines,\r\n      categories,\r\n      jobs\r\n    })\r\n  }\r\n  componentDidUpdate(){\r\n    localStorage.setItem('machines', JSON.stringify(this.state.machines) )\r\n    localStorage.setItem('categories', JSON.stringify(this.state.categories) )\r\n    localStorage.setItem('jobs', JSON.stringify(this.state.jobs) )\r\n  }\r\n\r\n\r\n  handleNavBarClick = (choosenMenu) => {\r\n    this.setState({\r\n      activeMenu:choosenMenu\r\n    })\r\n    console.log(choosenMenu)\r\n  }\r\n\r\n  /**\r\n   * CRUD Operations for machines (minus read obvs)\r\n   * \r\n   */\r\n  createMachine = async (machine) => {\r\n    const _machine = {\r\n      ...machine, \r\n      id: this.state.machines.length + 1\r\n    }\r\n    this.setState({\r\n      machines: [...this.state.machines,_machine]\r\n    })\r\n  }\r\n  updateMachine = (machine) => {\r\n    this.setState({\r\n      machines: this.state.machines.map(mac => mac.id === machine.id ? machine : mac)\r\n    })\r\n  }\r\n  deleteMachine = (machine) => {\r\n    this.setState({\r\n      machines: this.state.machines.filter(mac => mac.id !==  machine.id)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * CRUD Operations for Categories\r\n   */\r\n  createCategory = (category) => {\r\n    category.id = this.state.categories.reduce((prev,cur) => cur.id + 1, 1)\r\n    this.setState({\r\n      categories: [...this.state.categories, category]\r\n    })\r\n  }\r\n  updateCategory = (category) => {\r\n    this.setState({\r\n      categories: this.state.categories.map(cat => cat.id === category.id ? category : cat)\r\n    })\r\n  }\r\n  deleteCategory = (category) => {\r\n    console.log(\"deleting \", category)\r\n    this.setState({\r\n      categories: this.state.categories.filter(cat => cat.id !== category.id)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * CRUD Operations for Jobs\r\n   */\r\n  createJob = (job) => {\r\n    console.log(\"new job \", job)\r\n    job.id = this.state.jobs.reduce( (prev, curr) => curr.id >= prev ? curr.id+1 : prev, 1)\r\n    this.setState({\r\n      jobs: [...this.state.jobs, job]\r\n    })\r\n  }\r\n  updateJob = (job) => {\r\n    this.setState({\r\n      jobs: this.state.jobs.map(j => j.id === job.id ? job : j )\r\n    })\r\n  }\r\n  deleteJob = (job) => {\r\n    this.setState({\r\n      jobs: this.state.jobs.filter(j => j.id !== job.id)\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Router basename={process.env.PUBLIC_URL}>\r\n        <nav className='factory-navbar d-flex justify-content-between'>          \r\n          <div className=\"ml-2 navbar-brand text-white\">Water Bottling Plant Makespan Optimization</div>\r\n          <ul className=\"d-flex mr-5\">\r\n            <NavLink to=\"machines\">\r\n              <li className='factory-navbar__menu-item'>Machines</li> \r\n            </NavLink>\r\n            <NavLink to=\"jobs\">\r\n              <li className='factory-navbar__menu-item'>Jobs</li> \r\n            </NavLink>\r\n            <NavLink to=\"/\" exact>\r\n              <li className='factory-navbar__menu-item'>Solve</li> \r\n            </NavLink>\r\n          </ul>\r\n        </nav>\r\n        <Switch>\r\n          <Route path=\"/machines\" exact={true}>\r\n            <div className=\"container-fluid\">\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-8\">\r\n                  <Machines \r\n                    createMachine={this.createMachine} \r\n                    updateMachine={this.updateMachine} \r\n                    deleteMachine={this.deleteMachine}\r\n                    machines={this.state.machines}\r\n                    categories={this.state.categories}\r\n                    />\r\n                </div>\r\n                <div className=\"col-sm-4\">\r\n                  <Categories\r\n                    categories={this.state.categories}\r\n                    machines={this.state.machines}\r\n                    createCategory={this.createCategory}\r\n                    updateCategory={this.updateCategory}\r\n                    deleteCategory={this.deleteCategory}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Route>\r\n          <Route path=\"/jobs\"  exact={true}>\r\n            <JobEditor \r\n              createJob={this.createJob}\r\n              updateJob={this.updateJob}\r\n              deleteJob={this.deleteJob}\r\n              jobs={this.state.jobs}\r\n              machines={this.state.machines}\r\n            />\r\n          </Route>\r\n          <Route path=\"/parameters\"  exact={true}>\r\n            <Parameters  />\r\n          </Route>\r\n          <Route path=\"\" exact={true}>\r\n            <App\r\n              jobs={this.state.jobs}\r\n              machines={this.state.machines}\r\n            />\r\n          </Route>\r\n\r\n        </Switch>\r\n      </Router>\r\n    )\r\n  }\r\n};\r\n\r\nexport default FactoryOptimizationApp\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport FactoryOptimizationApp from './factoryOptimizationApp'; //Top level component that includes the optimizationWorkFlow\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<FactoryOptimizationApp />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}