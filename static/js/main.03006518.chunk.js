(this["webpackJsonpjssp-frontend"]=this["webpackJsonpjssp-frontend"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),l=a.n(o),i=(a(14),a(1)),s=a(2),c=a(4),u=a(3),h=a(5),m=(a(15),a(6)),p=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"randColor",value:function(){return Math.floor(180*Math.random())}},{key:"jobIdToColour",value:function(e){for(var t="".concat(e,"color"),a=0,n=0;n<t.length;n++)a=t.charCodeAt(n)+((a<<5)-a);var r="#";for(n=0;n<3;n++){r+=("00"+(a>>8*n&255).toString(16)).substr(-2)}return r}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.schedule.length;t++)if(t%3===0){var a=this.props.schedule[t],n=this.props.schedule[t+1],o=this.props.schedule[t+2],l=100*(o-n)/this.props.maxTime,i=100*n/this.props.maxTime,s={width:"".concat(l,"%"),height:"20px",backgroundColor:"".concat(this.jobIdToColour(a)),position:"absolute",left:"".concat(i,"%"),transition:"all 1s linear"},c=r.a.createElement("div",{id:"key-".concat(this.props.index,"-").concat(a),className:"job-".concat(a),style:s,"data-start":n,"data-end":o,"data-jobid":a},"Job-",a);e.push(c)}var u={position:"relative",display:"flex",top:"".concat(25*this.props.index,"px")};return r.a.createElement("div",{style:u},e)}}]),t}(r.a.Component),d=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){for(var e={position:"relative",top:"".concat(25*this.props.index,"px")},t=[],a=10*(this.props.maxTime/10+1),n=0;n<a;n++){var o=100*n/this.props.maxTime,l={left:"".concat(o,"%"),transition:"all 1s linear",position:"absolute"};if(n%10===0){var i=r.a.createElement("span",{style:l},r.a.createElement("div",null,"|"),r.a.createElement("div",null,n));t.push(i)}}return r.a.createElement("div",{style:e},t)}}]),t}(r.a.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.props.schedule.map((function(e){return e[e.length-1]}));console.log(e);var t=Math.max.apply(Math,Object(m.a)(e));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ganttChartWithY"},r.a.createElement("div",{className:"ganttChartYAxis"},this.props.schedule.map((function(e,t){return r.a.createElement("span",{className:"yAxisTick"},"Machine ".concat(t+1))}))),r.a.createElement("div",{className:"ganttChartData"},this.props.schedule.map((function(e,a){return r.a.createElement(p,{schedule:e,maxTime:t,index:a})})),r.a.createElement(d,{index:this.props.schedule.length,maxTime:t}))))}}]),t}(r.a.Component);a(16);function b(e){var t=this;this.schedule=e,this.getMakeSpan=function(){var e=t.schedule.map((function(e){return e.length&&0!==e.length?e[e.length-1]:0}));return Math.max.apply(Math,Object(m.a)(e))}}function f(e){var t=this;this.jssp1d=e,this.JSSP1dToGantt=function(e){for(var a=[],n=0;n<e.numMachines;n++)a.push([]);var r=new Array(e.numJobs).fill(0);return t.jssp1d.forEach((function(t){var n=e.jobs[t].splice(0,2),o=n[0],l=n[1],i=0===a[o].length?0:a[o][a[o].length-1],s=r[t],c=Math.max(s,i);r[t]=c+l;var u=[t,c+1,c+l];a[o]=[].concat(Object(m.a)(a[o]),u)})),new b(a)}}function g(e,t){for(var a=[],n=0;n<t;n++){var r=new Array(e).fill(n);a=[].concat(Object(m.a)(a),Object(m.a)(r))}return new f(function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(a))}function E(e){return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("a",{class:"navbar-brand",href:"/"},"Job Shop Problem Demo"),r.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{class:"navbar-toggler-icon"})),r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{class:"navbar-nav mr-auto"},r.a.createElement("li",{class:"nav-item active"},r.a.createElement("a",{class:"nav-link",href:"/"},"Simple Problem (n=4,m=5) ",r.a.createElement("span",{class:"sr-only"},"(current)"))),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link",href:"/"},"Medium (n=4,m=5)")))))}function j(e){return r.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{class:"navbar-nav mr-auto"},r.a.createElement("li",{class:"nav-item active"},r.a.createElement("a",{class:"nav-link",href:"/"},"Random Algorithm ",r.a.createElement("span",{class:"sr-only"},"(current)"))),r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{class:"nav-link",href:"/"},"Neighbourhood search algorithm")))))}var y=new function(e,t){this.numJobs=e,this.numMachines=t,this.jobs=[]}(4,5);y.jobs=[[0,10,1,20,2,20,3,40,4,10],[1,20,0,10,3,30,2,50,4,30],[2,30,1,20,4,12,3,40,0,10],[4,50,3,30,2,15,0,20,1,15]];var O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={schedule:[[],[]],makeSpan:1/0},a.runOptimizationAlgo(y,10,1),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"runOptimizationAlgo",value:function(e,t,a){for(var n=this,r=this.state.makeSpan,o=(new Date).getTime()+1e3*a,l=0;l<t;l++){if(console.log("running algo"),l%100==0&&(new Date).getTime()>o){console.log("Ending because of time limit"),console.log("Ran times : ",l);break}var i=g(e.numMachines,e.numJobs),s=Object.assign({},e);s.jobs=JSON.parse(JSON.stringify(e.jobs));var c=i.JSSP1dToGantt(s),u=c.getMakeSpan();u<r&&(r=u,console.log("Found Better",c),console.log("New Make Span at index ",l,u),this.setState({schedule:c.schedule,makeSpan:r}))}setTimeout((function(){n.runOptimizationAlgo(e,1,1)}),1e3)}},{key:"render",value:function(){return console.log("Render function re-running",this.state.schedule),r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(j,null),r.a.createElement("h1",null,"Simple Job Shop Optimization"),r.a.createElement(v,{schedule:this.state.schedule}),r.a.createElement("div",{className:"explanation"},r.a.createElement("hr",null),r.a.createElement("div",null,"How to read the chart?"),r.a.createElement("p",null,"Job Shop Problem is a class of problems that help you find the most efficient way of running certain number of jobs on a given set of machines. These types of problems regularly arise in manufacturing floors."),r.a.createElement("p",null,"The problem solved here has the following problem signature:",r.a.createElement("div",null,"+++++++++++++++++++++++"),r.a.createElement("div",null,"A simple Demo"),r.a.createElement("div",null,"4 5"),r.a.createElement("div",null,"0 10 1 20 2 20 3 40 4 10"),r.a.createElement("div",null,"1 20 0 10 3 30 2 50 4 30"),r.a.createElement("div",null,"2 30 1 20 4 12 3 40 0 10"),r.a.createElement("div",null,"4 50 3 30 2 15 0 20 1 15"),r.a.createElement("div",null,"++++++++++++++++++++++++"),"First line with numbers 4 and 5 indicates number of job and number of machine respectively. Each line after that indicates a job. First job needs to run on machine 0 for 10 units of time, then on machine 1 for 20 units of time then on machine 3 for 40 units of time and so on. Each job needs to run in the specific order described in the line. Algorithm that runs in the background finds the most optimal way of running all the jobs in the given order. The Chart shows the order in which each job must run on each machine.")))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports=a(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.03006518.chunk.js.map